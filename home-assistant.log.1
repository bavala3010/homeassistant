2024-08-08 10:32:59.914 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration average which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.916 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration entsoe which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.919 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration audiconnect which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.921 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration network_scanner which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.923 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration spoolman which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.925 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration stream_assist which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.927 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration flightradar24 which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.929 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration adaptive_lighting which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.931 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration generic_hygrostat which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.932 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration nordpool_diff which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.935 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration bambu_lab which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.937 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration sagemcom_fast which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.939 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration xiaomi_miio_airpurifier which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.941 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration sodexo which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.943 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration openplantbook which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.945 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration mass which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.947 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration audiconnect which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.949 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration powercalc which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.951 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration monitor_docker which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.953 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration edge_tts which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.955 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration alphaess which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.957 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration hacs which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.959 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration nuki_ng which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.961 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration localtuya which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.963 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration xiaomi_miio_fan which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.965 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration sunspec which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.967 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration wundergroundpws which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.969 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration webrtc which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.971 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration tuya_v2 which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.973 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration pyscript which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.975 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration spook_inverse which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.977 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration battery_sim which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.979 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration nordpool which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.981 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration iphonedetect which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.983 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration browser_mod which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.985 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration battery_notes which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.988 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration huesyncbox which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.990 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration buienalarm which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.991 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration mobile_vikings which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.993 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration multiscrape which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.995 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration google_photos which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.997 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration sql_json which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:32:59.999 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration alfen_wallbox which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.000 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration carbu_com which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.002 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration thermal_comfort which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.004 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration auto_backup which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.006 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration xiaomi_miot which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.008 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration daikin_residential which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.011 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration tplink_deco which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.013 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration irm_kmi which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.014 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration next_holiday which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.016 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration anniversaries which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.018 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration tgtg which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.020 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration populartimes which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.022 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration samsungtv_smart which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.024 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration xiaomi_miio_fan which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.027 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration energy_id which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.029 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration neerslag which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.031 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration blitzortung which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.032 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration ytube_music_player which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.034 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration pixometer which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.036 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration sun2 which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.038 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration toyota which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.040 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration tronity which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.043 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration daikin_onecta which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.044 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration splitwise which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.046 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration adsb_lol which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.048 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration google_home which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.050 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration afvalbeheer which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:00.052 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration spook which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2024-08-08 10:33:10.747 ERROR (MainThread) [custom_components.multiscrape.coordinator] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # Updating failed with exception: Client error '403 Forbidden' for url 'https://www.tijd.be/markten-live/fondsen/horizon-kbc-expertease-sri-highly-dynamic-tolerant-classic.616733575.html'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403
2024-08-08 10:33:13.059 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json[0].recipe.id }}'
2024-08-08 10:33:13.084 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json[0].recipe.name }}'
2024-08-08 10:33:13.087 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json['items'][0].recipe.name }}'
2024-08-08 10:33:13.090 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json['items'][0].recipe.id }}'
2024-08-08 10:33:13.098 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json['items'][0].date }}'
2024-08-08 10:33:13.101 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 1 when rendering '{{ value_json['items'][1].recipe.name }}'
2024-08-08 10:33:13.105 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 1 when rendering '{{ value_json['items'][1].recipe.id }}'
2024-08-08 10:33:13.108 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 1 when rendering '{{ value_json['items'][1].date }}'
2024-08-08 10:33:13.110 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 2 when rendering '{{ value_json['items'][2].recipe.name }}'
2024-08-08 10:33:13.114 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 2 when rendering '{{ value_json['items'][2].date }}'
2024-08-08 10:33:13.117 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 3 when rendering '{{ value_json['items'][3].recipe.name }}'
2024-08-08 10:33:13.121 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 3 when rendering '{{ value_json['items'][3].date }}'
2024-08-08 10:33:13.123 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 4 when rendering '{{ value_json['items'][4].recipe.name }}'
2024-08-08 10:33:13.126 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 4 when rendering '{{ value_json['items'][4].date }}'
2024-08-08 10:33:13.128 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 5 when rendering '{{ value_json['items'][5].recipe.name }}'
2024-08-08 10:33:13.141 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 5 when rendering '{{ value_json['items'][5].date }}'
2024-08-08 10:33:13.144 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ value_json['items'][6].recipe.name }}'
2024-08-08 10:33:13.148 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ value_json['items'][6].date }}'
2024-08-08 10:33:13.171 ERROR (MainThread) [homeassistant.components.sensor] Error while setting up splitwise platform for sensor
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity_platform.py", line 364, in _async_setup_platform
    await asyncio.shield(awaitable)
  File "/usr/local/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/config/custom_components/splitwise/sensor.py", line 76, in setup_platform
    add_entities([SplitwiseSensor(hass, client_id, client_secret)])
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/config/custom_components/splitwise/sensor.py", line 157, in __init__
    self.api.get_access_token_from_file()
  File "/config/custom_components/splitwise/sensor.py", line 113, in get_access_token_from_file
    self.get_access_token(code)
  File "/config/custom_components/splitwise/sensor.py", line 127, in get_access_token
    access_token = self.splitwise.getOAuth2AccessToken(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/splitwise/__init__.py", line 180, in getOAuth2AccessToken
    content = self.__makeRequest(Splitwise.OAUTH2_TOKEN_URL, 'POST', data=data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/splitwise/__init__.py", line 279, in __makeRequest
    raise SplitwiseBadRequestException("Please check your request", response=response)
splitwise.exception.SplitwiseBadRequestException: Please check your request
2024-08-08 10:33:13.918 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json[0].recipe.id }}'
2024-08-08 10:33:13.928 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json[0].recipe.name }}'
2024-08-08 10:33:14.183 ERROR (MainThread) [homeassistant.components.notify] Failed to initialize notification service file
2024-08-08 10:33:19.787 ERROR (MainThread) [hass_nabucasa.remote] Can't update remote details from Home Assistant cloud (401)
2024-08-08 10:33:24.254 ERROR (MainThread) [homeassistant.config_entries] Error setting up entry Daikin for daikin_residential
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/config_entries.py", line 604, in async_setup
    result = await component.async_setup_entry(hass, self)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/config/custom_components/daikin_residential/__init__.py", line 85, in async_setup_entry
    devices = await daikin_api.getCloudDevices()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/config/custom_components/daikin_residential/daikin_api.py", line 488, in getCloudDevices
    self.json_data = await self.getCloudDeviceDetails()
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/config/custom_components/daikin_residential/daikin_api.py", line 484, in getCloudDeviceDetails
    return await self.doBearerRequest("/v1/gateway-devices")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/config/custom_components/daikin_residential/daikin_api.py", line 119, in doBearerRequest
    raise Exception("Communication failed! Status: " + str(res.status_code))
Exception: Communication failed! Status: 403
2024-08-08 10:33:27.840 ERROR (MainThread) [homeassistant.components.script] Script with object id 'set_waarschoot_chauffage_away' could not be validated and has been disabled: expected a dictionary. Got [{'service': 'climate.set_preset_mode', 'data': {'preset_mode': 'away'}, 'target': {'entity_id': ['climate.waarschoot_living']}}, {'service': 'climate.set_hvac_mode', 'data': {'hvac_mode': 'off'}, 'target': {'entity_id': ['climate.waarschoot_keuken', 'climate.waarschoot_living', 'climate.waarschoot_zitput', 'climate.waarschoot_overloop', 'climate.waarschoot_badkamer', 'climate.waarschoot_slaapkamer']}}]
2024-08-08 10:33:27.841 ERROR (MainThread) [homeassistant.components.script] Script with object id 'set_waarschoot_chauffage_home' could not be validated and has been disabled: expected a dictionary. Got [{'service': 'climate.set_preset_mode', 'data': {'preset_mode': 'home'}, 'target': {'entity_id': ['climate.waarschoot_living']}}, {'service': 'climate.set_hvac_mode', 'data': {'hvac_mode': 'auto'}, 'target': {'entity_id': ['climate.waarschoot_keuken', 'climate.waarschoot_living', 'climate.waarschoot_zitput', 'climate.waarschoot_overloop', 'climate.waarschoot_badkamer', 'climate.waarschoot_slaapkamer']}}]
2024-08-08 10:33:31.214 ERROR (MainThread) [custom_components.toyota] 2 validation errors for NotificationResponseModel
guid
  field required (type=value_error.missing)
payload -> 0 -> vin
  field required (type=value_error.missing)
2024-08-08 10:33:34.695 ERROR (SyncWorker_18) [homeassistant.components.influxdb] InfluxDB bucket is not accessible due to '(401)
Reason: Unauthorized
HTTP response headers: HTTPHeaderDict({'Content-Type': 'application/json; charset=utf-8', 'X-Influxdb-Build': 'OSS', 'X-Influxdb-Version': 'v2.7.8', 'X-Platform-Error-Code': 'unauthorized', 'Date': 'Thu, 08 Aug 2024 08:33:34 GMT', 'Content-Length': '55'})
HTTP response body: {"code":"unauthorized","message":"unauthorized access"}
'. Please check that the bucket, org and token are correct and that the token has the correct permissions set. Retrying in 60 seconds.
2024-08-08 10:33:35.466 ERROR (MainThread) [custom_components.wundergroundpws.coordinator] Error fetching WUnderground data: TimeoutError()
2024-08-08 10:33:37.984 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved (None)
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/components/device_tracker/legacy.py", line 258, in _async_setup_integration
    legacy_platforms = await async_extract_config(hass, config)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/components/device_tracker/legacy.py", line 393, in async_extract_config
    raise ValueError(
ValueError: Unable to determine type for ping: None
2024-08-08 10:33:38.641 ERROR (MainThread) [custom_components.multiscrape.sensor] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # BE6307337095 # Unable to scrape data: Skipped scraping because data couldn't be updated 
Consider using debug logging and log_response for further investigation.
2024-08-08 10:33:38.677 ERROR (MainThread) [homeassistant.components.sensor] Error adding entity sensor.be6307334068 for domain sensor with platform multiscrape
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 662, in state
    numerical_value = float(value)  # type:ignore[arg-type]
                      ^^^^^^^^^^^^
ValueError: could not convert string to float: '1,104.14'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity_platform.py", line 598, in _async_add_entities
    await coro
  File "/usr/src/homeassistant/homeassistant/helpers/entity_platform.py", line 912, in _async_add_entity
    await entity.add_to_platform_finish()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1366, in add_to_platform_finish
    self.async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1005, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1130, in _async_write_ha_state
    self.__async_calculate_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1067, in __async_calculate_state
    state = self._stringify_state(available)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1011, in _stringify_state
    if (state := self.state) is None:
                 ^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 664, in state
    raise ValueError(
ValueError: Sensor sensor.be6307334068 has device class 'None', state class 'None' unit 'EUR' and suggested precision 'None' thus indicating it has a numeric value; however, it has the non-numeric value: '1,104.14' (<class 'str'>)
2024-08-08 10:33:42.431 ERROR (MainThread) [custom_components.average.sensor] Unable to find an entity "sensor.eikenbos_openweather_temperature"
2024-08-08 10:33:43.288 ERROR (MainThread) [homeassistant.components.sensor] Error adding entity sensor.online_status_leuven24_wunderground for domain sensor with platform scrape
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity_platform.py", line 598, in _async_add_entities
    await coro
  File "/usr/src/homeassistant/homeassistant/helpers/entity_platform.py", line 912, in _async_add_entity
    await entity.add_to_platform_finish()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1365, in add_to_platform_finish
    await self.async_added_to_hass()
  File "/usr/src/homeassistant/homeassistant/components/scrape/sensor.py", line 202, in async_added_to_hass
    self._async_update_from_rest_data()
  File "/usr/src/homeassistant/homeassistant/components/scrape/sensor.py", line 206, in _async_update_from_rest_data
    value = self._extract_value()
            ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/components/scrape/sensor.py", line 183, in _extract_value
    tag = raw_data.select(self._select)[self._index]
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/bs4/element.py", line 2116, in select
    return self.css.select(selector, namespaces, limit, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/bs4/css.py", line 162, in select
    self.api.select(
  File "/usr/local/lib/python3.12/site-packages/soupsieve/__init__.py", line 147, in select
    return compile(select, namespaces, flags, **kwargs).select(tag, limit)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/soupsieve/__init__.py", line 65, in compile
    return cp._cached_css_compile(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/soupsieve/css_parser.py", line 208, in _cached_css_compile
    ).process_selectors(),
      ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/soupsieve/css_parser.py", line 1129, in process_selectors
    return self.parse_selectors(self.selector_iter(self.pattern), index, flags)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/soupsieve/css_parser.py", line 965, in parse_selectors
    key, m = next(iselector)
             ^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/soupsieve/css_parser.py", line 1122, in selector_iter
    raise SelectorSyntaxError(msg, self.pattern, index)
soupsieve.util.SelectorSyntaxError: Invalid character '<' position 0
  line 1:
<span _ngcontent-app-root-c173="">Offline</span>
^
2024-08-08 10:33:48.824 ERROR (MainThread) [homeassistant.components.sensor] Platform powercalc does not generate unique IDs. ID edb45180-6c7f-45df-aecd-92d63c505627 is already used by sensor.master_bedroom_play_bart_power - ignoring sensor.master_bedroom_play_bart_power
2024-08-08 10:33:48.824 ERROR (MainThread) [homeassistant.components.sensor] Platform powercalc does not generate unique IDs. ID edb45180-6c7f-45df-aecd-92d63c505627_energy is already used by sensor.master_bedroom_play_bart_energy - ignoring sensor.master_bedroom_play_bart_energy
2024-08-08 10:33:48.825 ERROR (MainThread) [homeassistant.components.sensor] Platform powercalc does not generate unique IDs. ID 18e1a0cc-402c-4155-b12d-bc1df9460d2d is already used by sensor.master_bedroom_play_madouce_power - ignoring sensor.master_bedroom_play_madouce_power
2024-08-08 10:33:48.826 ERROR (MainThread) [homeassistant.components.sensor] Platform powercalc does not generate unique IDs. ID 18e1a0cc-402c-4155-b12d-bc1df9460d2d_energy is already used by sensor.master_bedroom_play_madouce_energy - ignoring sensor.master_bedroom_play_madouce_energy
2024-08-08 10:33:53.294 ERROR (SyncWorker_15) [custom_components.energy_id.energy_id.api] error:
2024-08-08 10:33:53.297 ERROR (MainThread) [homeassistant.components.sensor] Error while setting up energy_id platform for sensor
Traceback (most recent call last):
  File "/config/custom_components/energy_id/energy_id/api.py", line 120, in _do_call
    response.raise_for_status()
  File "/usr/local/lib/python3.12/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://api.energyid.eu/api/v1/records/https://app.energyid.eu/record/EA-14124988/meters

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/requests/models.py", line 974, in json
    return complexjson.loads(self.text, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/simplejson/__init__.py", line 514, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/simplejson/decoder.py", line 386, in decode
    obj, end = self.raw_decode(s)
               ^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/simplejson/decoder.py", line 416, in raw_decode
    return self.scan_once(s, idx=_w(s, idx).end())
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
simplejson.errors.JSONDecodeError: Expecting value: line 1 column 1 (char 0)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity_platform.py", line 364, in _async_setup_platform
    await asyncio.shield(awaitable)
  File "/config/custom_components/energy_id/sensor.py", line 31, in async_setup_entry
    record = await hass.async_add_executor_job(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/config/custom_components/energy_id/energy_id/api.py", line 27, in get_record
    response = self._do_call(
               ^^^^^^^^^^^^^^
  File "/config/custom_components/energy_id/energy_id/api.py", line 128, in _do_call
    _LOGGER.error(response.json())
                  ^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/requests/models.py", line 978, in json
    raise RequestsJSONDecodeError(e.msg, e.doc, e.pos)
requests.exceptions.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
2024-08-08 10:33:58.561 ERROR (MainThread) [homeassistant.components.binary_sensor] Error while setting up toyota platform for binary_sensor
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity_platform.py", line 364, in _async_setup_platform
    await asyncio.shield(awaitable)
  File "/config/custom_components/toyota/binary_sensor.py", line 232, in async_setup_entry
    for index, _ in enumerate(coordinator.data):
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'NoneType' object is not iterable
2024-08-08 10:33:58.564 ERROR (MainThread) [homeassistant.components.device_tracker] Error while setting up toyota platform for device_tracker
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity_platform.py", line 364, in _async_setup_platform
    await asyncio.shield(awaitable)
  File "/config/custom_components/toyota/device_tracker.py", line 39, in async_setup_entry
    for index, vehicle in enumerate(coordinator.data)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'NoneType' object is not iterable
2024-08-08 10:33:58.615 ERROR (MainThread) [homeassistant.components.sensor] Error while setting up toyota platform for sensor
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity_platform.py", line 364, in _async_setup_platform
    await asyncio.shield(awaitable)
  File "/config/custom_components/toyota/sensor.py", line 209, in async_setup_entry
    for index, _ in enumerate(coordinator.data):
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'NoneType' object is not iterable
2024-08-08 10:34:09.159 ERROR (MainThread) [homeassistant.components.sensor] Platform carbu_com does not generate unique IDs. ID Carbu.com super95 prediction already exists - ignoring sensor.carbu_com_super95_prediction
2024-08-08 10:34:09.160 ERROR (MainThread) [homeassistant.components.sensor] Platform carbu_com does not generate unique IDs. ID Carbu.com super95 official e10 already exists - ignoring sensor.carbu_com_super95_official_e10
2024-08-08 10:34:09.161 ERROR (MainThread) [homeassistant.components.sensor] Platform carbu_com does not generate unique IDs. ID Carbu.com oilstd 1000l prediction already exists - ignoring sensor.carbu_com_oilstd_1000l_prediction
2024-08-08 10:34:12.450 ERROR (MainThread) [custom_components.average.sensor] Unable to find an entity "sensor.eikenbos_openweather_temperature"
2024-08-08 10:34:19.816 ERROR (MainThread) [homeassistant.components.weather] Error adding entity weather.ileuve67 for domain weather with platform wundergroundpws
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity_platform.py", line 598, in _async_add_entities
    await coro
  File "/usr/src/homeassistant/homeassistant/helpers/entity_platform.py", line 912, in _async_add_entity
    await entity.add_to_platform_finish()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1366, in add_to_platform_finish
    self.async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1005, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1130, in _async_write_ha_state
    self.__async_calculate_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1067, in __async_calculate_state
    state = self._stringify_state(available)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1011, in _stringify_state
    if (state := self.state) is None:
                 ^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/components/weather/__init__.py", line 871, in state
    return self.condition
           ^^^^^^^^^^^^^^
  File "/config/custom_components/wundergroundpws/weather.py", line 155, in condition
    day = self.coordinator.get_forecast(FIELD_FORECAST_ICONCODE)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/config/custom_components/wundergroundpws/coordinator.py", line 214, in get_forecast
    return self.data[FIELD_DAYPART][0][field][period]
           ~~~~~~~~~^^^^^^^^^^^^^^^
TypeError: 'NoneType' object is not subscriptable
2024-08-08 10:34:19.889 ERROR (MainThread) [homeassistant.components.sensor] Error while setting up wundergroundpws platform for sensor
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity_platform.py", line 364, in _async_setup_platform
    await asyncio.shield(awaitable)
  File "/config/custom_components/wundergroundpws/sensor.py", line 47, in async_setup_entry
    WundergroundPWSSensor(coordinator, description) for description in SENSOR_DESCRIPTIONS
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/config/custom_components/wundergroundpws/sensor.py", line 116, in __init__
    self._sensor_data = _get_sensor_data(
                        ^^^^^^^^^^^^^^^^^
  File "/config/custom_components/wundergroundpws/sensor.py", line 180, in _get_sensor_data
    return sensors[FIELD_OBSERVATIONS][0][kind]
           ~~~~~~~^^^^^^^^^^^^^^^^^^^^
TypeError: 'NoneType' object is not subscriptable
2024-08-08 10:34:35.154 ERROR (SyncWorker_27) [homeassistant.components.influxdb] InfluxDB bucket is not accessible due to '(401)
Reason: Unauthorized
HTTP response headers: HTTPHeaderDict({'Content-Type': 'application/json; charset=utf-8', 'X-Influxdb-Build': 'OSS', 'X-Influxdb-Version': 'v2.7.8', 'X-Platform-Error-Code': 'unauthorized', 'Date': 'Thu, 08 Aug 2024 08:34:35 GMT', 'Content-Length': '55'})
HTTP response body: {"code":"unauthorized","message":"unauthorized access"}
'. Please check that the bucket, org and token are correct and that the token has the correct permissions set. Retrying in 60 seconds.
2024-08-08 10:34:36.442 ERROR (MainThread) [homeassistant.helpers.entity_platform] google_photos raises exception ConfigEntryNotReady in forwarded platform camera; Instead raise ConfigEntryNotReady before calling async_forward_entry_setups
2024-08-08 10:34:36.442 ERROR (MainThread) [homeassistant.helpers.entity_platform] google_photos raises exception ConfigEntryNotReady in forwarded platform sensor; Instead raise ConfigEntryNotReady before calling async_forward_entry_setups
2024-08-08 10:34:36.442 ERROR (MainThread) [homeassistant.helpers.entity_platform] google_photos raises exception ConfigEntryNotReady in forwarded platform select; Instead raise ConfigEntryNotReady before calling async_forward_entry_setups
2024-08-08 10:34:38.444 ERROR (MainThread) [custom_components.multiscrape.coordinator] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # Updating failed with exception: Client error '403 Forbidden' for url 'https://www.tijd.be/markten-live/fondsen/horizon-kbc-expertease-sri-highly-dynamic-tolerant-classic.616733575.html'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403
2024-08-08 10:34:38.445 ERROR (MainThread) [custom_components.multiscrape.sensor] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # BE6307337095 # Unable to scrape data: Skipped scraping because data couldn't be updated 
Consider using debug logging and log_response for further investigation.
2024-08-08 10:34:49.945 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved (None)
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 662, in state
    numerical_value = float(value)  # type:ignore[arg-type]
                      ^^^^^^^^^^^^
ValueError: could not convert string to float: '1,104.14'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 258, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 453, in _async_refresh
    self.async_update_listeners()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 168, in async_update_listeners
    update_callback()
  File "/config/custom_components/multiscrape/entity.py", line 110, in _handle_coordinator_update
    self.async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1005, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1130, in _async_write_ha_state
    self.__async_calculate_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1067, in __async_calculate_state
    state = self._stringify_state(available)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1011, in _stringify_state
    if (state := self.state) is None:
                 ^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 664, in state
    raise ValueError(
ValueError: Sensor sensor.be6307334068 has device class 'None', state class 'None' unit 'EUR' and suggested precision 'None' thus indicating it has a numeric value; however, it has the non-numeric value: '1,104.14' (<class 'str'>)
2024-08-08 10:35:03.483 ERROR (MainThread) [homeassistant.helpers.event] Error while processing template: Template<template=({% set start = now().replace(hour=0,minute=0,second=0, microsecond=0) %} {% set end = (start + timedelta(days=1)) %} {% set start = start.strftime("%Y-%m-%dT%H:%M:%S+00:00") %} {% set end = end.strftime("%Y-%m-%dT%H:%M:%S+00:00") %} {% set ns = namespace(min_temp=100, max_temp=-100) %} {% for i in state_attr('weather.eikenbos_openweather', 'forecast') -%}
  {% if start <= i.datetime < end %}
    {% if i.temperature < ns.min_temp %}
      {% set ns.min_temp = i.temperature %}
      {% set ns.min_temp_datetime = i.datetime %}
    {% endif %}
    {% if i.temperature > ns.max_temp %}
      {% set ns.max_temp = i.temperature %}
      {% set ns.max_temp_datetime = i.datetime %}
    {% endif %}
  {% endif %}
{% endfor %} {{ as_timestamp(ns.max_temp_datetime)|timestamp_custom('%H:%M') }}) renders=2>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 603, in async_render
    render_result = _render_with_context(self.template, compiled, **kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2638, in _render_with_context
    return template.render(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/jinja2/environment.py", line 1304, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.12/site-packages/jinja2/environment.py", line 939, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "<template>", line 1, in top-level template code
TypeError: 'NoneType' object is not iterable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 715, in async_render_to_info
    render_info._result = self.async_render(  # noqa: SLF001
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 605, in async_render
    raise TemplateError(err) from err
homeassistant.exceptions.TemplateError: TypeError: 'NoneType' object is not iterable
2024-08-08 10:35:03.491 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('TypeError: 'NoneType' object is not iterable') while processing template 'Template<template=({% set start = now().replace(hour=0,minute=0,second=0, microsecond=0) %} {% set end = (start + timedelta(days=1)) %} {% set start = start.strftime("%Y-%m-%dT%H:%M:%S+00:00") %} {% set end = end.strftime("%Y-%m-%dT%H:%M:%S+00:00") %} {% set ns = namespace(min_temp=100, max_temp=-100) %} {% for i in state_attr('weather.eikenbos_openweather', 'forecast') -%}
  {% if start <= i.datetime < end %}
    {% if i.temperature < ns.min_temp %}
      {% set ns.min_temp = i.temperature %}
      {% set ns.min_temp_datetime = i.datetime %}
    {% endif %}
    {% if i.temperature > ns.max_temp %}
      {% set ns.max_temp = i.temperature %}
      {% set ns.max_temp_datetime = i.datetime %}
    {% endif %}
  {% endif %}
{% endfor %} {{ as_timestamp(ns.max_temp_datetime)|timestamp_custom('%H:%M') }}) renders=4>' for attribute '_attr_native_value' in entity 'sensor.day_max_temp_datetime'
2024-08-08 10:35:05.671 ERROR (MainThread) [homeassistant.helpers.event] Error while processing template: Template<template=({% set wifi_bssid = states('sensor.sm_a715f_wifi_bssid') %} {% set wifi_signal = states('sensor.sm_a715f_wifi_signal_strength') | float %} {% if  wifi_bssid == "2a:52:a1:83:e3:bd" %}
  living
{% elif wifi_bssid == "2e:52:a1:83:cf:36" and wifi_signal <= -68 %}
  badkamer
{% elif wifi_bssid == "2e:52:a1:83:cf:36" and (-75 < wifi_signal <= -67) %}
  Alunya kamer
{% elif wifi_bssid == "2e:52:a1:83:cf:36" and (-67 < wifi_signal <= -55) %}
  badkamer
{% elif wifi_bssid == "2e:52:a1:83:cf:36" and (-55 < wifi_signal < -30) %}
  gang
{% elif wifi_bssid == "32:52:a1:83:e1:97" %}
  veranda
{% elif wifi_bssid != "2a:52:a1:83:e3:bd" and wifi_bssid != "2e:52:a1:83:cf:36" and wifi_bssid != "32:52:a1:83:e1:97" %}
  niet thuis
{% else %}
  onbekend
{% endif %}) renders=2>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2257, in forgiving_float_filter
    return float(value)
           ^^^^^^^^^^^^
ValueError: could not convert string to float: 'unknown'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 603, in async_render
    render_result = _render_with_context(self.template, compiled, **kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2638, in _render_with_context
    return template.render(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/jinja2/environment.py", line 1304, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.12/site-packages/jinja2/environment.py", line 939, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "<template>", line 1, in top-level template code
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2260, in forgiving_float_filter
    raise_no_default("float", value)
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 1871, in raise_no_default
    raise ValueError(
ValueError: Template error: float got invalid input 'unknown' when rendering template '{% set wifi_bssid = states('sensor.sm_a715f_wifi_bssid') %} {% set wifi_signal = states('sensor.sm_a715f_wifi_signal_strength') | float %} {% if  wifi_bssid == "2a:52:a1:83:e3:bd" %}
  living
{% elif wifi_bssid == "2e:52:a1:83:cf:36" and wifi_signal <= -68 %}
  badkamer
{% elif wifi_bssid == "2e:52:a1:83:cf:36" and (-75 < wifi_signal <= -67) %}
  Alunya kamer
{% elif wifi_bssid == "2e:52:a1:83:cf:36" and (-67 < wifi_signal <= -55) %}
  badkamer
{% elif wifi_bssid == "2e:52:a1:83:cf:36" and (-55 < wifi_signal < -30) %}
  gang
{% elif wifi_bssid == "32:52:a1:83:e1:97" %}
  veranda
{% elif wifi_bssid != "2a:52:a1:83:e3:bd" and wifi_bssid != "2e:52:a1:83:cf:36" and wifi_bssid != "32:52:a1:83:e1:97" %}
  niet thuis
{% else %}
  onbekend
{% endif %}' but no default was specified

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 715, in async_render_to_info
    render_info._result = self.async_render(  # noqa: SLF001
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 605, in async_render
    raise TemplateError(err) from err
homeassistant.exceptions.TemplateError: ValueError: Template error: float got invalid input 'unknown' when rendering template '{% set wifi_bssid = states('sensor.sm_a715f_wifi_bssid') %} {% set wifi_signal = states('sensor.sm_a715f_wifi_signal_strength') | float %} {% if  wifi_bssid == "2a:52:a1:83:e3:bd" %}
  living
{% elif wifi_bssid == "2e:52:a1:83:cf:36" and wifi_signal <= -68 %}
  badkamer
{% elif wifi_bssid == "2e:52:a1:83:cf:36" and (-75 < wifi_signal <= -67) %}
  Alunya kamer
{% elif wifi_bssid == "2e:52:a1:83:cf:36" and (-67 < wifi_signal <= -55) %}
  badkamer
{% elif wifi_bssid == "2e:52:a1:83:cf:36" and (-55 < wifi_signal < -30) %}
  gang
{% elif wifi_bssid == "32:52:a1:83:e1:97" %}
  veranda
{% elif wifi_bssid != "2a:52:a1:83:e3:bd" and wifi_bssid != "2e:52:a1:83:cf:36" and wifi_bssid != "32:52:a1:83:e1:97" %}
  niet thuis
{% else %}
  onbekend
{% endif %}' but no default was specified
2024-08-08 10:35:05.675 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('ValueError: Template error: float got invalid input 'unknown' when rendering template '{% set wifi_bssid = states('sensor.sm_a715f_wifi_bssid') %} {% set wifi_signal = states('sensor.sm_a715f_wifi_signal_strength') | float %} {% if  wifi_bssid == "2a:52:a1:83:e3:bd" %}
  living
{% elif wifi_bssid == "2e:52:a1:83:cf:36" and wifi_signal <= -68 %}
  badkamer
{% elif wifi_bssid == "2e:52:a1:83:cf:36" and (-75 < wifi_signal <= -67) %}
  Alunya kamer
{% elif wifi_bssid == "2e:52:a1:83:cf:36" and (-67 < wifi_signal <= -55) %}
  badkamer
{% elif wifi_bssid == "2e:52:a1:83:cf:36" and (-55 < wifi_signal < -30) %}
  gang
{% elif wifi_bssid == "32:52:a1:83:e1:97" %}
  veranda
{% elif wifi_bssid != "2a:52:a1:83:e3:bd" and wifi_bssid != "2e:52:a1:83:cf:36" and wifi_bssid != "32:52:a1:83:e1:97" %}
  niet thuis
{% else %}
  onbekend
{% endif %}' but no default was specified') while processing template 'Template<template=({% set wifi_bssid = states('sensor.sm_a715f_wifi_bssid') %} {% set wifi_signal = states('sensor.sm_a715f_wifi_signal_strength') | float %} {% if  wifi_bssid == "2a:52:a1:83:e3:bd" %}
  living
{% elif wifi_bssid == "2e:52:a1:83:cf:36" and wifi_signal <= -68 %}
  badkamer
{% elif wifi_bssid == "2e:52:a1:83:cf:36" and (-75 < wifi_signal <= -67) %}
  Alunya kamer
{% elif wifi_bssid == "2e:52:a1:83:cf:36" and (-67 < wifi_signal <= -55) %}
  badkamer
{% elif wifi_bssid == "2e:52:a1:83:cf:36" and (-55 < wifi_signal < -30) %}
  gang
{% elif wifi_bssid == "32:52:a1:83:e1:97" %}
  veranda
{% elif wifi_bssid != "2a:52:a1:83:e3:bd" and wifi_bssid != "2e:52:a1:83:cf:36" and wifi_bssid != "32:52:a1:83:e1:97" %}
  niet thuis
{% else %}
  onbekend
{% endif %}) renders=4>' for attribute '_attr_native_value' in entity 'sensor.alunya_phone_room'
2024-08-08 10:35:05.678 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: 'ns' is undefined when rendering '{{ ns.last_watt }}'
2024-08-08 10:35:05.679 ERROR (MainThread) [homeassistant.helpers.event] Error while processing template: Template<template=({{ ns.last_watt }}) renders=2>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 603, in async_render
    render_result = _render_with_context(self.template, compiled, **kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2638, in _render_with_context
    return template.render(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/jinja2/environment.py", line 1304, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.12/site-packages/jinja2/environment.py", line 939, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "<template>", line 1, in top-level template code
  File "/usr/local/lib/python3.12/site-packages/jinja2/sandbox.py", line 327, in getattr
    value = getattr(obj, attribute)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2670, in _fail_with_undefined_error
    return super()._fail_with_undefined_error(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'ns' is undefined

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 715, in async_render_to_info
    render_info._result = self.async_render(  # noqa: SLF001
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 605, in async_render
    raise TemplateError(err) from err
homeassistant.exceptions.TemplateError: UndefinedError: 'ns' is undefined
2024-08-08 10:35:05.685 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: 'ns' is undefined when rendering '{{ ns.next_watt }}'
2024-08-08 10:35:05.685 ERROR (MainThread) [homeassistant.helpers.event] Error while processing template: Template<template=({{ ns.next_watt }}) renders=2>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 603, in async_render
    render_result = _render_with_context(self.template, compiled, **kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2638, in _render_with_context
    return template.render(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/jinja2/environment.py", line 1304, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.12/site-packages/jinja2/environment.py", line 939, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "<template>", line 1, in top-level template code
  File "/usr/local/lib/python3.12/site-packages/jinja2/sandbox.py", line 327, in getattr
    value = getattr(obj, attribute)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2670, in _fail_with_undefined_error
    return super()._fail_with_undefined_error(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'ns' is undefined

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 715, in async_render_to_info
    render_info._result = self.async_render(  # noqa: SLF001
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 605, in async_render
    raise TemplateError(err) from err
homeassistant.exceptions.TemplateError: UndefinedError: 'ns' is undefined
2024-08-08 10:35:05.692 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: 'ns' is undefined when rendering '{{ ns.last_watt }}'
2024-08-08 10:35:05.693 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: 'ns' is undefined when rendering '{{ ns.next_watt }}'
2024-08-08 10:35:05.695 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('UndefinedError: 'ns' is undefined') while processing template 'Template<template=({{ ns.last_watt }}) renders=4>' for attribute 'watt' in entity 'sensor.last_hour_high_wattage'
2024-08-08 10:35:05.695 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('UndefinedError: 'ns' is undefined') while processing template 'Template<template=({{ ns.next_watt }}) renders=4>' for attribute 'next_hour_watt' in entity 'sensor.last_hour_high_wattage'
2024-08-08 10:35:05.718 ERROR (MainThread) [homeassistant.helpers.event] Error while processing template: Template<template=({% if as_timestamp(states('sensor.buienalarm_15min_next_rain_forecast')) %}
  {{ ( ( as_timestamp(states('sensor.buienalarm_15min_next_rain_forecast')) - as_timestamp(now()) ) / 60 ) | round }}
{% else %}
  {{ states('nonexistent') }}
{% endif %}) renders=2>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2077, in forgiving_as_timestamp
    return dt_util.as_timestamp(value)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/util/dt.py", line 153, in as_timestamp
    raise ValueError("not a valid date/time.")
ValueError: not a valid date/time.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 603, in async_render
    render_result = _render_with_context(self.template, compiled, **kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2638, in _render_with_context
    return template.render(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/jinja2/environment.py", line 1304, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.12/site-packages/jinja2/environment.py", line 939, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "<template>", line 1, in top-level template code
  File "/usr/local/lib/python3.12/site-packages/jinja2/sandbox.py", line 394, in call
    return __context.call(__obj, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2080, in forgiving_as_timestamp
    raise_no_default("as_timestamp", value)
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 1871, in raise_no_default
    raise ValueError(
ValueError: Template error: as_timestamp got invalid input 'unknown' when rendering template '{% if as_timestamp(states('sensor.buienalarm_15min_next_rain_forecast')) %}
  {{ ( ( as_timestamp(states('sensor.buienalarm_15min_next_rain_forecast')) - as_timestamp(now()) ) / 60 ) | round }}
{% else %}
  {{ states('nonexistent') }}
{% endif %}' but no default was specified

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 715, in async_render_to_info
    render_info._result = self.async_render(  # noqa: SLF001
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 605, in async_render
    raise TemplateError(err) from err
homeassistant.exceptions.TemplateError: ValueError: Template error: as_timestamp got invalid input 'unknown' when rendering template '{% if as_timestamp(states('sensor.buienalarm_15min_next_rain_forecast')) %}
  {{ ( ( as_timestamp(states('sensor.buienalarm_15min_next_rain_forecast')) - as_timestamp(now()) ) / 60 ) | round }}
{% else %}
  {{ states('nonexistent') }}
{% endif %}' but no default was specified
2024-08-08 10:35:05.733 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('ValueError: Template error: as_timestamp got invalid input 'unknown' when rendering template '{% if as_timestamp(states('sensor.buienalarm_15min_next_rain_forecast')) %}
  {{ ( ( as_timestamp(states('sensor.buienalarm_15min_next_rain_forecast')) - as_timestamp(now()) ) / 60 ) | round }}
{% else %}
  {{ states('nonexistent') }}
{% endif %}' but no default was specified') while processing template 'Template<template=({% if as_timestamp(states('sensor.buienalarm_15min_next_rain_forecast')) %}
  {{ ( ( as_timestamp(states('sensor.buienalarm_15min_next_rain_forecast')) - as_timestamp(now()) ) / 60 ) | round }}
{% else %}
  {{ states('nonexistent') }}
{% endif %}) renders=4>' for attribute '_attr_native_value' in entity 'sensor.regenvoorspelling_min'
2024-08-08 10:35:05.777 ERROR (MainThread) [homeassistant.helpers.event] Error while processing template: Template<template=({% set solar = states('sensor.solar_sim_energy_today_adj') | float() %} {% set hours = states('sensor.zon_van_eikenbos_daglicht') | round(2) - 1 %} {% set result = ( solar / hours ) | round(2) %} {% set p = ( ([result - 0.8, 0 ] | max ) * hours ) | round(2) %} {{ p }}) renders=2>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2257, in forgiving_float_filter
    return float(value)
           ^^^^^^^^^^^^
ValueError: could not convert string to float: 'unknown'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 603, in async_render
    render_result = _render_with_context(self.template, compiled, **kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2638, in _render_with_context
    return template.render(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/jinja2/environment.py", line 1304, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.12/site-packages/jinja2/environment.py", line 939, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "<template>", line 1, in top-level template code
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2260, in forgiving_float_filter
    raise_no_default("float", value)
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 1871, in raise_no_default
    raise ValueError(
ValueError: Template error: float got invalid input 'unknown' when rendering template '{% set solar = states('sensor.solar_sim_energy_today_adj') | float() %} {% set hours = states('sensor.zon_van_eikenbos_daglicht') | round(2) - 1 %} {% set result = ( solar / hours ) | round(2) %} {% set p = ( ([result - 0.8, 0 ] | max ) * hours ) | round(2) %} {{ p }}' but no default was specified

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 715, in async_render_to_info
    render_info._result = self.async_render(  # noqa: SLF001
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 605, in async_render
    raise TemplateError(err) from err
homeassistant.exceptions.TemplateError: ValueError: Template error: float got invalid input 'unknown' when rendering template '{% set solar = states('sensor.solar_sim_energy_today_adj') | float() %} {% set hours = states('sensor.zon_van_eikenbos_daglicht') | round(2) - 1 %} {% set result = ( solar / hours ) | round(2) %} {% set p = ( ([result - 0.8, 0 ] | max ) * hours ) | round(2) %} {{ p }}' but no default was specified
2024-08-08 10:35:05.783 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('ValueError: Template error: float got invalid input 'unknown' when rendering template '{% set solar = states('sensor.solar_sim_energy_today_adj') | float() %} {% set hours = states('sensor.zon_van_eikenbos_daglicht') | round(2) - 1 %} {% set result = ( solar / hours ) | round(2) %} {% set p = ( ([result - 0.8, 0 ] | max ) * hours ) | round(2) %} {{ p }}' but no default was specified') while processing template 'Template<template=({% set solar = states('sensor.solar_sim_energy_today_adj') | float() %} {% set hours = states('sensor.zon_van_eikenbos_daglicht') | round(2) - 1 %} {% set result = ( solar / hours ) | round(2) %} {% set p = ( ([result - 0.8, 0 ] | max ) * hours ) | round(2) %} {{ p }}) renders=4>' for attribute '_attr_native_value' in entity 'sensor.car_charge_estimate_day'
2024-08-08 10:35:05.801 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: access to attribute 'append' of 'list' object is unsafe. when rendering '{% set remaining_time = states('sensor.audi_e_tron_sportback_remaining_charge_time') | int %} {% set current_time = now().strftime('%Y-%m-%d %H:%M') %} {% set data_points = [] %} {% if remaining_time is not none %}
  {% for minute in range(0, 1440) %}
    {% set time_diff = minute | int / 60 %}
    {% set new_time = (as_timestamp(current_time) + time_diff * 60) | timestamp_custom('%Y-%m-%d %H:%M', false) %}
    {% if minute < remaining_time %}
      {% set data_point = {'x': new_time, 'y': remaining_time - minute} %}
    {% else %}
      {% set data_point = {'x': new_time, 'y': 0} %}
    {% endif %}
    {% set _ = data_points.append(data_point) %}
  {% endfor %}
  [{{ data_points | join(', ') }}]
{% else %}
  unknown
{% endif %}'
2024-08-08 10:35:05.802 ERROR (MainThread) [homeassistant.helpers.event] Error while processing template: Template<template=({% set remaining_time = states('sensor.audi_e_tron_sportback_remaining_charge_time') | int %} {% set current_time = now().strftime('%Y-%m-%d %H:%M') %} {% set data_points = [] %} {% if remaining_time is not none %}
  {% for minute in range(0, 1440) %}
    {% set time_diff = minute | int / 60 %}
    {% set new_time = (as_timestamp(current_time) + time_diff * 60) | timestamp_custom('%Y-%m-%d %H:%M', false) %}
    {% if minute < remaining_time %}
      {% set data_point = {'x': new_time, 'y': remaining_time - minute} %}
    {% else %}
      {% set data_point = {'x': new_time, 'y': 0} %}
    {% endif %}
    {% set _ = data_points.append(data_point) %}
  {% endfor %}
  [{{ data_points | join(', ') }}]
{% else %}
  unknown
{% endif %}) renders=2>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 603, in async_render
    render_result = _render_with_context(self.template, compiled, **kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2638, in _render_with_context
    return template.render(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/jinja2/environment.py", line 1304, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.12/site-packages/jinja2/environment.py", line 939, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "<template>", line 10, in top-level template code
  File "/usr/local/lib/python3.12/site-packages/jinja2/sandbox.py", line 392, in call
    if not __self.is_safe_callable(__obj):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 3053, in is_safe_callable
    ) or super().is_safe_callable(obj)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/jinja2/sandbox.py", line 276, in is_safe_callable
    getattr(obj, "unsafe_callable", False) or getattr(obj, "alters_data", False)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2670, in _fail_with_undefined_error
    return super()._fail_with_undefined_error(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.SecurityError: access to attribute 'append' of 'list' object is unsafe.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 715, in async_render_to_info
    render_info._result = self.async_render(  # noqa: SLF001
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 605, in async_render
    raise TemplateError(err) from err
homeassistant.exceptions.TemplateError: SecurityError: access to attribute 'append' of 'list' object is unsafe.
2024-08-08 10:35:05.809 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: access to attribute 'append' of 'list' object is unsafe. when rendering '{% set remaining_time = states('sensor.audi_e_tron_sportback_remaining_charge_time') | int %} {% set current_time = now().strftime('%Y-%m-%d %H:%M') %} {% set data_points = [] %} {% if remaining_time is not none %}
  {% for minute in range(0, 1440) %}
    {% set time_diff = minute | int / 60 %}
    {% set new_time = (as_timestamp(current_time) + time_diff * 60) | timestamp_custom('%Y-%m-%d %H:%M', false) %}
    {% if minute < remaining_time %}
      {% set data_point = {'x': new_time, 'y': remaining_time - minute} %}
    {% else %}
      {% set data_point = {'x': new_time, 'y': 0} %}
    {% endif %}
    {% set _ = data_points.append(data_point) %}
  {% endfor %}
  [{{ data_points | join(', ') }}]
{% else %}
  unknown
{% endif %}'
2024-08-08 10:35:05.811 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('SecurityError: access to attribute 'append' of 'list' object is unsafe.') while processing template 'Template<template=({% set remaining_time = states('sensor.audi_e_tron_sportback_remaining_charge_time') | int %} {% set current_time = now().strftime('%Y-%m-%d %H:%M') %} {% set data_points = [] %} {% if remaining_time is not none %}
  {% for minute in range(0, 1440) %}
    {% set time_diff = minute | int / 60 %}
    {% set new_time = (as_timestamp(current_time) + time_diff * 60) | timestamp_custom('%Y-%m-%d %H:%M', false) %}
    {% if minute < remaining_time %}
      {% set data_point = {'x': new_time, 'y': remaining_time - minute} %}
    {% else %}
      {% set data_point = {'x': new_time, 'y': 0} %}
    {% endif %}
    {% set _ = data_points.append(data_point) %}
  {% endfor %}
  [{{ data_points | join(', ') }}]
{% else %}
  unknown
{% endif %}) renders=4>' for attribute 'data_points' in entity 'sensor.car_1_remaining_charge_time_next_24h'
2024-08-08 10:35:05.841 ERROR (MainThread) [homeassistant.helpers.event] Error while processing template: Template<template=({% set r =  ( 10 * ( states('sensor.be6307337095') | float() - 1009.61 )) | round(2) + ( 10 * ( states('sensor.be6307334068') | float() - 981.59  )) | round(2) + ( 17 * ( states('sensor.be0175280016') | float() - 613.22  )) | round(2) %} {{ r | round(2) }}) renders=2>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2257, in forgiving_float_filter
    return float(value)
           ^^^^^^^^^^^^
ValueError: could not convert string to float: 'unavailable'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 603, in async_render
    render_result = _render_with_context(self.template, compiled, **kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2638, in _render_with_context
    return template.render(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/jinja2/environment.py", line 1304, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.12/site-packages/jinja2/environment.py", line 939, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "<template>", line 1, in top-level template code
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2260, in forgiving_float_filter
    raise_no_default("float", value)
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 1871, in raise_no_default
    raise ValueError(
ValueError: Template error: float got invalid input 'unavailable' when rendering template '{% set r =  ( 10 * ( states('sensor.be6307337095') | float() - 1009.61 )) | round(2) + ( 10 * ( states('sensor.be6307334068') | float() - 981.59  )) | round(2) + ( 17 * ( states('sensor.be0175280016') | float() - 613.22  )) | round(2) %} {{ r | round(2) }}' but no default was specified

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 715, in async_render_to_info
    render_info._result = self.async_render(  # noqa: SLF001
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 605, in async_render
    raise TemplateError(err) from err
homeassistant.exceptions.TemplateError: ValueError: Template error: float got invalid input 'unavailable' when rendering template '{% set r =  ( 10 * ( states('sensor.be6307337095') | float() - 1009.61 )) | round(2) + ( 10 * ( states('sensor.be6307334068') | float() - 981.59  )) | round(2) + ( 17 * ( states('sensor.be0175280016') | float() - 613.22  )) | round(2) %} {{ r | round(2) }}' but no default was specified
2024-08-08 10:35:05.846 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('ValueError: Template error: float got invalid input 'unavailable' when rendering template '{% set r =  ( 10 * ( states('sensor.be6307337095') | float() - 1009.61 )) | round(2) + ( 10 * ( states('sensor.be6307334068') | float() - 981.59  )) | round(2) + ( 17 * ( states('sensor.be0175280016') | float() - 613.22  )) | round(2) %} {{ r | round(2) }}' but no default was specified') while processing template 'Template<template=({% set r =  ( 10 * ( states('sensor.be6307337095') | float() - 1009.61 )) | round(2) + ( 10 * ( states('sensor.be6307334068') | float() - 981.59  )) | round(2) + ( 17 * ( states('sensor.be0175280016') | float() - 613.22  )) | round(2) %} {{ r | round(2) }}) renders=4>' for attribute '_attr_native_value' in entity 'sensor.madouce_invest_result'
2024-08-08 10:35:05.849 ERROR (MainThread) [homeassistant.helpers.event] Error while processing template: Template<template=({% set azimuth = states('sensor.blitzortung_lightning_azimuth') | int %} {% if azimuth >= 337.5 or azimuth < 22.5 %}
  noorden
{% elif azimuth >= 22.5 and azimuth < 67.5 %}
  noordoosten
{% elif azimuth >= 67.5 and azimuth < 112.5 %}
  oosten
{% elif azimuth >= 112.5 and azimuth < 157.5 %}
  zuidoosten
{% elif azimuth >= 157.5 and azimuth < 202.5 %}
  zuiden
{% elif azimuth >= 202.5 and azimuth < 247.5 %}
  zuidwesten
{% elif azimuth >= 247.5 and azimuth < 292.5 %}
  westen
{% else %}
  noordwesten
{% endif %}) renders=2>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 603, in async_render
    render_result = _render_with_context(self.template, compiled, **kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2638, in _render_with_context
    return template.render(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/jinja2/environment.py", line 1304, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.12/site-packages/jinja2/environment.py", line 939, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "<template>", line 1, in top-level template code
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2276, in forgiving_int_filter
    raise_no_default("int", value)
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 1871, in raise_no_default
    raise ValueError(
ValueError: Template error: int got invalid input 'unknown' when rendering template '{% set azimuth = states('sensor.blitzortung_lightning_azimuth') | int %} {% if azimuth >= 337.5 or azimuth < 22.5 %}
  noorden
{% elif azimuth >= 22.5 and azimuth < 67.5 %}
  noordoosten
{% elif azimuth >= 67.5 and azimuth < 112.5 %}
  oosten
{% elif azimuth >= 112.5 and azimuth < 157.5 %}
  zuidoosten
{% elif azimuth >= 157.5 and azimuth < 202.5 %}
  zuiden
{% elif azimuth >= 202.5 and azimuth < 247.5 %}
  zuidwesten
{% elif azimuth >= 247.5 and azimuth < 292.5 %}
  westen
{% else %}
  noordwesten
{% endif %}' but no default was specified

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 715, in async_render_to_info
    render_info._result = self.async_render(  # noqa: SLF001
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 605, in async_render
    raise TemplateError(err) from err
homeassistant.exceptions.TemplateError: ValueError: Template error: int got invalid input 'unknown' when rendering template '{% set azimuth = states('sensor.blitzortung_lightning_azimuth') | int %} {% if azimuth >= 337.5 or azimuth < 22.5 %}
  noorden
{% elif azimuth >= 22.5 and azimuth < 67.5 %}
  noordoosten
{% elif azimuth >= 67.5 and azimuth < 112.5 %}
  oosten
{% elif azimuth >= 112.5 and azimuth < 157.5 %}
  zuidoosten
{% elif azimuth >= 157.5 and azimuth < 202.5 %}
  zuiden
{% elif azimuth >= 202.5 and azimuth < 247.5 %}
  zuidwesten
{% elif azimuth >= 247.5 and azimuth < 292.5 %}
  westen
{% else %}
  noordwesten
{% endif %}' but no default was specified
2024-08-08 10:35:05.854 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('ValueError: Template error: int got invalid input 'unknown' when rendering template '{% set azimuth = states('sensor.blitzortung_lightning_azimuth') | int %} {% if azimuth >= 337.5 or azimuth < 22.5 %}
  noorden
{% elif azimuth >= 22.5 and azimuth < 67.5 %}
  noordoosten
{% elif azimuth >= 67.5 and azimuth < 112.5 %}
  oosten
{% elif azimuth >= 112.5 and azimuth < 157.5 %}
  zuidoosten
{% elif azimuth >= 157.5 and azimuth < 202.5 %}
  zuiden
{% elif azimuth >= 202.5 and azimuth < 247.5 %}
  zuidwesten
{% elif azimuth >= 247.5 and azimuth < 292.5 %}
  westen
{% else %}
  noordwesten
{% endif %}' but no default was specified') while processing template 'Template<template=({% set azimuth = states('sensor.blitzortung_lightning_azimuth') | int %} {% if azimuth >= 337.5 or azimuth < 22.5 %}
  noorden
{% elif azimuth >= 22.5 and azimuth < 67.5 %}
  noordoosten
{% elif azimuth >= 67.5 and azimuth < 112.5 %}
  oosten
{% elif azimuth >= 112.5 and azimuth < 157.5 %}
  zuidoosten
{% elif azimuth >= 157.5 and azimuth < 202.5 %}
  zuiden
{% elif azimuth >= 202.5 and azimuth < 247.5 %}
  zuidwesten
{% elif azimuth >= 247.5 and azimuth < 292.5 %}
  westen
{% else %}
  noordwesten
{% endif %}) renders=4>' for attribute '_attr_native_value' in entity 'sensor.lightning_direction'
2024-08-08 10:35:05.868 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('UndefinedError: 'result' is undefined') while processing template 'Template<template=({% if result < 0 %}
  false
{% endif %}) renders=4>' for attribute '_attr_available' in entity 'sensor.net_neutrality_now'
2024-08-08 10:35:08.293 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:35:08.323 ERROR (MainThread) [custom_components.ytube_music_player.media_player] async_check_api failed
2024-08-08 10:35:10.386 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:35:11.418 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:35:12.633 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json['items'][0].recipe.name }}'
2024-08-08 10:35:12.635 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json['items'][0].recipe.id }}'
2024-08-08 10:35:12.638 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json['items'][0].date }}'
2024-08-08 10:35:12.641 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 1 when rendering '{{ value_json['items'][1].recipe.name }}'
2024-08-08 10:35:12.642 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 1 when rendering '{{ value_json['items'][1].recipe.id }}'
2024-08-08 10:35:12.645 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 1 when rendering '{{ value_json['items'][1].date }}'
2024-08-08 10:35:12.647 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 2 when rendering '{{ value_json['items'][2].recipe.name }}'
2024-08-08 10:35:12.649 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 2 when rendering '{{ value_json['items'][2].date }}'
2024-08-08 10:35:12.651 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 3 when rendering '{{ value_json['items'][3].recipe.name }}'
2024-08-08 10:35:12.654 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 3 when rendering '{{ value_json['items'][3].date }}'
2024-08-08 10:35:12.656 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 4 when rendering '{{ value_json['items'][4].recipe.name }}'
2024-08-08 10:35:12.661 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 4 when rendering '{{ value_json['items'][4].date }}'
2024-08-08 10:35:12.663 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 5 when rendering '{{ value_json['items'][5].recipe.name }}'
2024-08-08 10:35:12.665 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 5 when rendering '{{ value_json['items'][5].date }}'
2024-08-08 10:35:12.668 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ value_json['items'][6].recipe.name }}'
2024-08-08 10:35:12.669 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ value_json['items'][6].date }}'
2024-08-08 10:35:13.983 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json[0].recipe.id }}'
2024-08-08 10:35:13.992 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json[0].recipe.name }}'
2024-08-08 10:35:16.419 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:35:19.185 ERROR (MainThread) [homeassistant.helpers.event] Error while processing template: Template<template=({{ as_timestamp(states('sensor.sm_s916b_next_alarm')) | int() == as_timestamp(now() + timedelta(minutes=5)) | int() }}) renders=3>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2077, in forgiving_as_timestamp
    return dt_util.as_timestamp(value)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/util/dt.py", line 153, in as_timestamp
    raise ValueError("not a valid date/time.")
ValueError: not a valid date/time.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 603, in async_render
    render_result = _render_with_context(self.template, compiled, **kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2638, in _render_with_context
    return template.render(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/jinja2/environment.py", line 1304, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.12/site-packages/jinja2/environment.py", line 939, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "<template>", line 1, in top-level template code
  File "/usr/local/lib/python3.12/site-packages/jinja2/sandbox.py", line 394, in call
    return __context.call(__obj, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2080, in forgiving_as_timestamp
    raise_no_default("as_timestamp", value)
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 1871, in raise_no_default
    raise ValueError(
ValueError: Template error: as_timestamp got invalid input 'unknown' when rendering template '{{ as_timestamp(states('sensor.sm_s916b_next_alarm')) | int() == as_timestamp(now() + timedelta(minutes=5)) | int() }}' but no default was specified

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 715, in async_render_to_info
    render_info._result = self.async_render(  # noqa: SLF001
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 605, in async_render
    raise TemplateError(err) from err
homeassistant.exceptions.TemplateError: ValueError: Template error: as_timestamp got invalid input 'unknown' when rendering template '{{ as_timestamp(states('sensor.sm_s916b_next_alarm')) | int() == as_timestamp(now() + timedelta(minutes=5)) | int() }}' but no default was specified
2024-08-08 10:35:19.509 ERROR (MainThread) [homeassistant.helpers.event] Error while processing template: Template<template=({{ states('sensor.carbu_com_oilstd_1000l_prediction') | float() < 0 }}) renders=3>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2257, in forgiving_float_filter
    return float(value)
           ^^^^^^^^^^^^
ValueError: could not convert string to float: 'unknown'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 603, in async_render
    render_result = _render_with_context(self.template, compiled, **kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2638, in _render_with_context
    return template.render(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/jinja2/environment.py", line 1304, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.12/site-packages/jinja2/environment.py", line 939, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "<template>", line 1, in top-level template code
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 2260, in forgiving_float_filter
    raise_no_default("float", value)
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 1871, in raise_no_default
    raise ValueError(
ValueError: Template error: float got invalid input 'unknown' when rendering template '{{ states('sensor.carbu_com_oilstd_1000l_prediction') | float() < 0 }}' but no default was specified

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 715, in async_render_to_info
    render_info._result = self.async_render(  # noqa: SLF001
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 605, in async_render
    raise TemplateError(err) from err
homeassistant.exceptions.TemplateError: ValueError: Template error: float got invalid input 'unknown' when rendering template '{{ states('sensor.carbu_com_oilstd_1000l_prediction') | float() < 0 }}' but no default was specified
2024-08-08 10:35:20.385 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:35:24.876 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:35:26.594 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:35:30.717 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.solar_power fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 942, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1300, in async_device_update
    await self.async_update()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 571, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 114, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 330, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 270, in _async_update_data
    raise NotImplementedError("Update method not implemented")
NotImplementedError: Update method not implemented
2024-08-08 10:35:33.498 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:35:36.424 ERROR (SyncWorker_46) [homeassistant.components.influxdb] InfluxDB bucket is not accessible due to '(401)
Reason: Unauthorized
HTTP response headers: HTTPHeaderDict({'Content-Type': 'application/json; charset=utf-8', 'X-Influxdb-Build': 'OSS', 'X-Influxdb-Version': 'v2.7.8', 'X-Platform-Error-Code': 'unauthorized', 'Date': 'Thu, 08 Aug 2024 08:35:36 GMT', 'Content-Length': '55'})
HTTP response body: {"code":"unauthorized","message":"unauthorized access"}
'. Please check that the bucket, org and token are correct and that the token has the correct permissions set. Retrying in 60 seconds.
2024-08-08 10:35:39.879 ERROR (MainThread) [custom_components.multiscrape.coordinator] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # Updating failed with exception: Client error '403 Forbidden' for url 'https://www.tijd.be/markten-live/fondsen/horizon-kbc-expertease-sri-highly-dynamic-tolerant-classic.616733575.html'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403
2024-08-08 10:35:39.879 ERROR (MainThread) [custom_components.multiscrape.sensor] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # BE6307337095 # Unable to scrape data: Skipped scraping because data couldn't be updated 
Consider using debug logging and log_response for further investigation.
2024-08-08 10:35:40.165 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:35:40.386 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:35:42.024 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:35:42.179 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved (None)
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 662, in state
    numerical_value = float(value)  # type:ignore[arg-type]
                      ^^^^^^^^^^^^
ValueError: could not convert string to float: '1,104.14'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 258, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 453, in _async_refresh
    self.async_update_listeners()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 168, in async_update_listeners
    update_callback()
  File "/config/custom_components/multiscrape/entity.py", line 110, in _handle_coordinator_update
    self.async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1005, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1130, in _async_write_ha_state
    self.__async_calculate_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1067, in __async_calculate_state
    state = self._stringify_state(available)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1011, in _stringify_state
    if (state := self.state) is None:
                 ^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 664, in state
    raise ValueError(
ValueError: Sensor sensor.be6307334068 has device class 'None', state class 'None' unit 'EUR' and suggested precision 'None' thus indicating it has a numeric value; however, it has the non-numeric value: '1,104.14' (<class 'str'>)
2024-08-08 10:35:46.943 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:35:52.565 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:35:56.940 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:36:00.186 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: access to attribute 'append' of 'list' object is unsafe. when rendering '{% set remaining_time = states('sensor.audi_e_tron_sportback_remaining_charge_time') | int %} {% set current_time = now().strftime('%Y-%m-%d %H:%M') %} {% set data_points = [] %} {% if remaining_time is not none %}
  {% for minute in range(0, 1440) %}
    {% set time_diff = minute | int / 60 %}
    {% set new_time = (as_timestamp(current_time) + time_diff * 60) | timestamp_custom('%Y-%m-%d %H:%M', false) %}
    {% if minute < remaining_time %}
      {% set data_point = {'x': new_time, 'y': remaining_time - minute} %}
    {% else %}
      {% set data_point = {'x': new_time, 'y': 0} %}
    {% endif %}
    {% set _ = data_points.append(data_point) %}
  {% endfor %}
  [{{ data_points | join(', ') }}]
{% else %}
  unknown
{% endif %}'
2024-08-08 10:36:00.303 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.solar_power fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 942, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1300, in async_device_update
    await self.async_update()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 571, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 114, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 330, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 270, in _async_update_data
    raise NotImplementedError("Update method not implemented")
NotImplementedError: Update method not implemented
2024-08-08 10:36:00.385 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:36:01.942 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:36:07.493 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:36:10.387 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:36:11.968 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:36:16.967 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:36:22.490 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:36:26.966 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:36:30.305 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.solar_power fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 942, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1300, in async_device_update
    await self.async_update()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 571, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 114, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 330, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 270, in _async_update_data
    raise NotImplementedError("Update method not implemented")
NotImplementedError: Update method not implemented
2024-08-08 10:36:30.390 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:36:31.964 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:36:37.763 ERROR (SyncWorker_9) [homeassistant.components.influxdb] InfluxDB bucket is not accessible due to '(401)
Reason: Unauthorized
HTTP response headers: HTTPHeaderDict({'Content-Type': 'application/json; charset=utf-8', 'X-Influxdb-Build': 'OSS', 'X-Influxdb-Version': 'v2.7.8', 'X-Platform-Error-Code': 'unauthorized', 'Date': 'Thu, 08 Aug 2024 08:36:37 GMT', 'Content-Length': '55'})
HTTP response body: {"code":"unauthorized","message":"unauthorized access"}
'. Please check that the bucket, org and token are correct and that the token has the correct permissions set. Retrying in 60 seconds.
2024-08-08 10:36:38.841 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:36:39.423 ERROR (MainThread) [custom_components.multiscrape.coordinator] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # Updating failed with exception: Client error '403 Forbidden' for url 'https://www.tijd.be/markten-live/fondsen/horizon-kbc-expertease-sri-highly-dynamic-tolerant-classic.616733575.html'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403
2024-08-08 10:36:39.424 ERROR (MainThread) [custom_components.multiscrape.sensor] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # BE6307337095 # Unable to scrape data: Skipped scraping because data couldn't be updated 
Consider using debug logging and log_response for further investigation.
2024-08-08 10:36:40.387 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:36:42.773 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved (None)
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 662, in state
    numerical_value = float(value)  # type:ignore[arg-type]
                      ^^^^^^^^^^^^
ValueError: could not convert string to float: '1,104.14'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 258, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 453, in _async_refresh
    self.async_update_listeners()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 168, in async_update_listeners
    update_callback()
  File "/config/custom_components/multiscrape/entity.py", line 110, in _handle_coordinator_update
    self.async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1005, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1130, in _async_write_ha_state
    self.__async_calculate_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1067, in __async_calculate_state
    state = self._stringify_state(available)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1011, in _stringify_state
    if (state := self.state) is None:
                 ^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 664, in state
    raise ValueError(
ValueError: Sensor sensor.be6307334068 has device class 'None', state class 'None' unit 'EUR' and suggested precision 'None' thus indicating it has a numeric value; however, it has the non-numeric value: '1,104.14' (<class 'str'>)
2024-08-08 10:36:47.797 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:36:50.387 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:36:53.560 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:36:57.823 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:37:00.186 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: access to attribute 'append' of 'list' object is unsafe. when rendering '{% set remaining_time = states('sensor.audi_e_tron_sportback_remaining_charge_time') | int %} {% set current_time = now().strftime('%Y-%m-%d %H:%M') %} {% set data_points = [] %} {% if remaining_time is not none %}
  {% for minute in range(0, 1440) %}
    {% set time_diff = minute | int / 60 %}
    {% set new_time = (as_timestamp(current_time) + time_diff * 60) | timestamp_custom('%Y-%m-%d %H:%M', false) %}
    {% if minute < remaining_time %}
      {% set data_point = {'x': new_time, 'y': remaining_time - minute} %}
    {% else %}
      {% set data_point = {'x': new_time, 'y': 0} %}
    {% endif %}
    {% set _ = data_points.append(data_point) %}
  {% endfor %}
  [{{ data_points | join(', ') }}]
{% else %}
  unknown
{% endif %}'
2024-08-08 10:37:00.318 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.solar_power fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 942, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1300, in async_device_update
    await self.async_update()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 571, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 114, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 330, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 270, in _async_update_data
    raise NotImplementedError("Update method not implemented")
NotImplementedError: Update method not implemented
2024-08-08 10:37:00.386 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:37:02.810 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:37:08.496 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:37:10.387 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:37:12.644 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json['items'][0].recipe.name }}'
2024-08-08 10:37:12.647 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json['items'][0].recipe.id }}'
2024-08-08 10:37:12.653 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json['items'][0].date }}'
2024-08-08 10:37:12.655 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 1 when rendering '{{ value_json['items'][1].recipe.name }}'
2024-08-08 10:37:12.663 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 1 when rendering '{{ value_json['items'][1].recipe.id }}'
2024-08-08 10:37:12.665 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 1 when rendering '{{ value_json['items'][1].date }}'
2024-08-08 10:37:12.667 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 2 when rendering '{{ value_json['items'][2].recipe.name }}'
2024-08-08 10:37:12.677 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 2 when rendering '{{ value_json['items'][2].date }}'
2024-08-08 10:37:12.679 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 3 when rendering '{{ value_json['items'][3].recipe.name }}'
2024-08-08 10:37:12.688 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 3 when rendering '{{ value_json['items'][3].date }}'
2024-08-08 10:37:12.695 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 4 when rendering '{{ value_json['items'][4].recipe.name }}'
2024-08-08 10:37:12.697 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 4 when rendering '{{ value_json['items'][4].date }}'
2024-08-08 10:37:12.704 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 5 when rendering '{{ value_json['items'][5].recipe.name }}'
2024-08-08 10:37:12.707 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 5 when rendering '{{ value_json['items'][5].date }}'
2024-08-08 10:37:12.714 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ value_json['items'][6].recipe.name }}'
2024-08-08 10:37:12.717 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ value_json['items'][6].date }}'
2024-08-08 10:37:12.873 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:37:14.021 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json[0].recipe.id }}'
2024-08-08 10:37:14.044 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json[0].recipe.name }}'
2024-08-08 10:37:17.844 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:37:20.386 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:37:23.494 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:37:27.842 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:37:30.347 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.solar_power fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 942, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1300, in async_device_update
    await self.async_update()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 571, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 114, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 330, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 270, in _async_update_data
    raise NotImplementedError("Update method not implemented")
NotImplementedError: Update method not implemented
2024-08-08 10:37:30.386 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:37:32.843 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:37:37.905 ERROR (SyncWorker_50) [homeassistant.components.influxdb] InfluxDB bucket is not accessible due to '(401)
Reason: Unauthorized
HTTP response headers: HTTPHeaderDict({'Content-Type': 'application/json; charset=utf-8', 'X-Influxdb-Build': 'OSS', 'X-Influxdb-Version': 'v2.7.8', 'X-Platform-Error-Code': 'unauthorized', 'Date': 'Thu, 08 Aug 2024 08:37:37 GMT', 'Content-Length': '55'})
HTTP response body: {"code":"unauthorized","message":"unauthorized access"}
'. Please check that the bucket, org and token are correct and that the token has the correct permissions set. Retrying in 60 seconds.
2024-08-08 10:37:38.718 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:37:39.440 ERROR (MainThread) [custom_components.multiscrape.coordinator] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # Updating failed with exception: Client error '403 Forbidden' for url 'https://www.tijd.be/markten-live/fondsen/horizon-kbc-expertease-sri-highly-dynamic-tolerant-classic.616733575.html'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403
2024-08-08 10:37:39.444 ERROR (MainThread) [custom_components.multiscrape.sensor] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # BE6307337095 # Unable to scrape data: Skipped scraping because data couldn't be updated 
Consider using debug logging and log_response for further investigation.
2024-08-08 10:37:40.389 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:37:42.868 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:37:43.267 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved (None)
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 662, in state
    numerical_value = float(value)  # type:ignore[arg-type]
                      ^^^^^^^^^^^^
ValueError: could not convert string to float: '1,104.14'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 258, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 453, in _async_refresh
    self.async_update_listeners()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 168, in async_update_listeners
    update_callback()
  File "/config/custom_components/multiscrape/entity.py", line 110, in _handle_coordinator_update
    self.async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1005, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1130, in _async_write_ha_state
    self.__async_calculate_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1067, in __async_calculate_state
    state = self._stringify_state(available)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1011, in _stringify_state
    if (state := self.state) is None:
                 ^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 664, in state
    raise ValueError(
ValueError: Sensor sensor.be6307334068 has device class 'None', state class 'None' unit 'EUR' and suggested precision 'None' thus indicating it has a numeric value; however, it has the non-numeric value: '1,104.14' (<class 'str'>)
2024-08-08 10:37:47.868 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:37:50.402 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:37:53.494 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:37:57.895 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:38:00.186 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: access to attribute 'append' of 'list' object is unsafe. when rendering '{% set remaining_time = states('sensor.audi_e_tron_sportback_remaining_charge_time') | int %} {% set current_time = now().strftime('%Y-%m-%d %H:%M') %} {% set data_points = [] %} {% if remaining_time is not none %}
  {% for minute in range(0, 1440) %}
    {% set time_diff = minute | int / 60 %}
    {% set new_time = (as_timestamp(current_time) + time_diff * 60) | timestamp_custom('%Y-%m-%d %H:%M', false) %}
    {% if minute < remaining_time %}
      {% set data_point = {'x': new_time, 'y': remaining_time - minute} %}
    {% else %}
      {% set data_point = {'x': new_time, 'y': 0} %}
    {% endif %}
    {% set _ = data_points.append(data_point) %}
  {% endfor %}
  [{{ data_points | join(', ') }}]
{% else %}
  unknown
{% endif %}'
2024-08-08 10:38:00.337 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.solar_power fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 942, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1300, in async_device_update
    await self.async_update()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 571, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 114, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 330, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 270, in _async_update_data
    raise NotImplementedError("Update method not implemented")
NotImplementedError: Update method not implemented
2024-08-08 10:38:00.386 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:38:02.896 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:38:08.493 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:38:08.815 ERROR (MainThread) [homeassistant] Error doing job: Exception in callback _TrackTimeInterval._interval_listener(<Job track ti... of ...>>)>)>>) (None)
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 1640, in _interval_listener
    self.hass.async_run_hass_job(self._run_job, dt_util.utcnow(), background=True)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/generic_hygrostat/binary_sensor.py", line 147, in _async_update
    self.update_humidity()
  File "/config/custom_components/generic_hygrostat/binary_sensor.py", line 187, in update_humidity
    self.sensor_humidity = float(sensor.attributes[self.sensor_attribute])
                                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'humidity'
2024-08-08 10:38:10.386 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:38:12.892 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:38:17.894 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:38:20.517 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:38:23.522 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:38:27.893 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:38:30.306 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.solar_power fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 942, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1300, in async_device_update
    await self.async_update()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 571, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 114, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 330, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 270, in _async_update_data
    raise NotImplementedError("Update method not implemented")
NotImplementedError: Update method not implemented
2024-08-08 10:38:30.385 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:38:32.893 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:38:38.044 ERROR (SyncWorker_37) [homeassistant.components.influxdb] InfluxDB bucket is not accessible due to '(401)
Reason: Unauthorized
HTTP response headers: HTTPHeaderDict({'Content-Type': 'application/json; charset=utf-8', 'X-Influxdb-Build': 'OSS', 'X-Influxdb-Version': 'v2.7.8', 'X-Platform-Error-Code': 'unauthorized', 'Date': 'Thu, 08 Aug 2024 08:38:38 GMT', 'Content-Length': '55'})
HTTP response body: {"code":"unauthorized","message":"unauthorized access"}
'. Please check that the bucket, org and token are correct and that the token has the correct permissions set. Retrying in 60 seconds.
2024-08-08 10:38:38.535 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:38:39.409 ERROR (MainThread) [custom_components.multiscrape.coordinator] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # Updating failed with exception: Client error '403 Forbidden' for url 'https://www.tijd.be/markten-live/fondsen/horizon-kbc-expertease-sri-highly-dynamic-tolerant-classic.616733575.html'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403
2024-08-08 10:38:39.410 ERROR (MainThread) [custom_components.multiscrape.sensor] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # BE6307337095 # Unable to scrape data: Skipped scraping because data couldn't be updated 
Consider using debug logging and log_response for further investigation.
2024-08-08 10:38:40.387 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:38:42.884 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:38:44.540 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved (None)
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 662, in state
    numerical_value = float(value)  # type:ignore[arg-type]
                      ^^^^^^^^^^^^
ValueError: could not convert string to float: '1,104.14'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 258, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 453, in _async_refresh
    self.async_update_listeners()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 168, in async_update_listeners
    update_callback()
  File "/config/custom_components/multiscrape/entity.py", line 110, in _handle_coordinator_update
    self.async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1005, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1130, in _async_write_ha_state
    self.__async_calculate_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1067, in __async_calculate_state
    state = self._stringify_state(available)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1011, in _stringify_state
    if (state := self.state) is None:
                 ^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 664, in state
    raise ValueError(
ValueError: Sensor sensor.be6307334068 has device class 'None', state class 'None' unit 'EUR' and suggested precision 'None' thus indicating it has a numeric value; however, it has the non-numeric value: '1,104.14' (<class 'str'>)
2024-08-08 10:38:48.503 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:38:50.387 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:38:53.835 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:38:57.959 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:39:00.186 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: access to attribute 'append' of 'list' object is unsafe. when rendering '{% set remaining_time = states('sensor.audi_e_tron_sportback_remaining_charge_time') | int %} {% set current_time = now().strftime('%Y-%m-%d %H:%M') %} {% set data_points = [] %} {% if remaining_time is not none %}
  {% for minute in range(0, 1440) %}
    {% set time_diff = minute | int / 60 %}
    {% set new_time = (as_timestamp(current_time) + time_diff * 60) | timestamp_custom('%Y-%m-%d %H:%M', false) %}
    {% if minute < remaining_time %}
      {% set data_point = {'x': new_time, 'y': remaining_time - minute} %}
    {% else %}
      {% set data_point = {'x': new_time, 'y': 0} %}
    {% endif %}
    {% set _ = data_points.append(data_point) %}
  {% endfor %}
  [{{ data_points | join(', ') }}]
{% else %}
  unknown
{% endif %}'
2024-08-08 10:39:00.335 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.solar_power fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 942, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1300, in async_device_update
    await self.async_update()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 571, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 114, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 330, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 270, in _async_update_data
    raise NotImplementedError("Update method not implemented")
NotImplementedError: Update method not implemented
2024-08-08 10:39:00.387 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:39:02.962 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:39:08.631 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:39:10.388 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:39:12.824 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json['items'][0].recipe.name }}'
2024-08-08 10:39:12.827 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json['items'][0].recipe.id }}'
2024-08-08 10:39:12.835 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json['items'][0].date }}'
2024-08-08 10:39:12.838 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 1 when rendering '{{ value_json['items'][1].recipe.name }}'
2024-08-08 10:39:12.845 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 1 when rendering '{{ value_json['items'][1].recipe.id }}'
2024-08-08 10:39:12.853 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 1 when rendering '{{ value_json['items'][1].date }}'
2024-08-08 10:39:12.856 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 2 when rendering '{{ value_json['items'][2].recipe.name }}'
2024-08-08 10:39:12.864 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 2 when rendering '{{ value_json['items'][2].date }}'
2024-08-08 10:39:12.867 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 3 when rendering '{{ value_json['items'][3].recipe.name }}'
2024-08-08 10:39:12.875 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 3 when rendering '{{ value_json['items'][3].date }}'
2024-08-08 10:39:12.878 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 4 when rendering '{{ value_json['items'][4].recipe.name }}'
2024-08-08 10:39:12.885 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 4 when rendering '{{ value_json['items'][4].date }}'
2024-08-08 10:39:12.889 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 5 when rendering '{{ value_json['items'][5].recipe.name }}'
2024-08-08 10:39:12.891 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 5 when rendering '{{ value_json['items'][5].date }}'
2024-08-08 10:39:12.893 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ value_json['items'][6].recipe.name }}'
2024-08-08 10:39:12.901 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ value_json['items'][6].date }}'
2024-08-08 10:39:13.052 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:39:14.007 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json[0].recipe.id }}'
2024-08-08 10:39:14.065 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json[0].recipe.name }}'
2024-08-08 10:39:18.053 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:39:20.449 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:39:23.635 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:39:28.036 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:39:30.365 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.solar_power fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 942, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1300, in async_device_update
    await self.async_update()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 571, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 114, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 330, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 270, in _async_update_data
    raise NotImplementedError("Update method not implemented")
NotImplementedError: Update method not implemented
2024-08-08 10:39:30.405 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:39:33.037 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:39:34.845 ERROR (MainThread) [custom_components.xiaomi_miot.fan] Mi Air(zhimi.airpurifier.mb3): Got MiioException while fetching the state: Unable to discover the device 192.168.68.23, mapping: {'air_purifier.fault': {'siid': 2, 'piid': 1}, 'air_purifier.on': {'siid': 2, 'piid': 2}, 'air_purifier.fan_level': {'siid': 2, 'piid': 4}, 'air_purifier.mode': {'siid': 2, 'piid': 5}, 'aqi.purify_volume': {'siid': 13, 'piid': 1}, 'aqi.average_aqi': {'siid': 13, 'piid': 2}, 'aqi.aqi_updata_heartbeat': {'siid': 13, 'piid': 9}, 'use_time': {'siid': 12, 'piid': 1}, 'motor_speed': {'siid': 10, 'piid': 8}, 'motor_speed.favorite_fan_level': {'siid': 10, 'piid': 10}, 'physical_controls_locked': {'siid': 7, 'piid': 1}, 'indicator_light.brightness': {'siid': 6, 'piid': 1}, 'indicator_light.on': {'siid': 6, 'piid': 6}, 'alarm': {'siid': 5, 'piid': 1}, 'filter.filter_life_level': {'siid': 4, 'piid': 3}, 'filter.filter_used_time': {'siid': 4, 'piid': 5}, 'environment.pm2_5_density': {'siid': 3, 'piid': 6}, 'environment.relative_humidity': {'siid': 3, 'piid': 7}, 'environment.temperature': {'siid': 3, 'piid': 8}}, max_properties: 10/19
2024-08-08 10:39:34.853 ERROR (MainThread) [custom_components.xiaomi_miot.fan] Living ventilator(zhimi.fan.za4): Got MiioException while fetching the state: Unable to discover the device 192.168.68.34, mapping: {'fan.on': {'siid': 2, 'piid': 1}, 'fan.fan_level': {'siid': 2, 'piid': 2}, 'fan.horizontal_swing': {'siid': 2, 'piid': 3}, 'horizontal_swing_included_angle-2-4': {'siid': 2, 'piid': 4}, 'fan.mode': {'siid': 2, 'piid': 5}, 'fan-2.stepless_fan_level': {'siid': 2, 'piid': 6}, 'countdown.countdown_time': {'siid': 6, 'piid': 1}, 'indicator_light.brightness': {'siid': 5, 'piid': 1}, 'alarm': {'siid': 4, 'piid': 1}, 'physical_controls_locked': {'siid': 3, 'piid': 1}}, max_properties: 10/10
2024-08-08 10:39:38.061 ERROR (SyncWorker_51) [homeassistant.components.influxdb] InfluxDB bucket is not accessible due to '(401)
Reason: Unauthorized
HTTP response headers: HTTPHeaderDict({'Content-Type': 'application/json; charset=utf-8', 'X-Influxdb-Build': 'OSS', 'X-Influxdb-Version': 'v2.7.8', 'X-Platform-Error-Code': 'unauthorized', 'Date': 'Thu, 08 Aug 2024 08:39:38 GMT', 'Content-Length': '55'})
HTTP response body: {"code":"unauthorized","message":"unauthorized access"}
'. Please check that the bucket, org and token are correct and that the token has the correct permissions set. Retrying in 60 seconds.
2024-08-08 10:39:38.637 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:39:39.429 ERROR (MainThread) [custom_components.multiscrape.coordinator] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # Updating failed with exception: Client error '403 Forbidden' for url 'https://www.tijd.be/markten-live/fondsen/horizon-kbc-expertease-sri-highly-dynamic-tolerant-classic.616733575.html'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403
2024-08-08 10:39:39.430 ERROR (MainThread) [custom_components.multiscrape.sensor] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # BE6307337095 # Unable to scrape data: Skipped scraping because data couldn't be updated 
Consider using debug logging and log_response for further investigation.
2024-08-08 10:39:40.387 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:39:43.043 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:39:44.949 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved (None)
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 662, in state
    numerical_value = float(value)  # type:ignore[arg-type]
                      ^^^^^^^^^^^^
ValueError: could not convert string to float: '1,104.14'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 258, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 453, in _async_refresh
    self.async_update_listeners()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 168, in async_update_listeners
    update_callback()
  File "/config/custom_components/multiscrape/entity.py", line 110, in _handle_coordinator_update
    self.async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1005, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1130, in _async_write_ha_state
    self.__async_calculate_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1067, in __async_calculate_state
    state = self._stringify_state(available)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1011, in _stringify_state
    if (state := self.state) is None:
                 ^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 664, in state
    raise ValueError(
ValueError: Sensor sensor.be6307334068 has device class 'None', state class 'None' unit 'EUR' and suggested precision 'None' thus indicating it has a numeric value; however, it has the non-numeric value: '1,104.14' (<class 'str'>)
2024-08-08 10:39:48.042 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:39:50.389 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:39:53.620 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:39:58.045 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:40:00.185 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: access to attribute 'append' of 'list' object is unsafe. when rendering '{% set remaining_time = states('sensor.audi_e_tron_sportback_remaining_charge_time') | int %} {% set current_time = now().strftime('%Y-%m-%d %H:%M') %} {% set data_points = [] %} {% if remaining_time is not none %}
  {% for minute in range(0, 1440) %}
    {% set time_diff = minute | int / 60 %}
    {% set new_time = (as_timestamp(current_time) + time_diff * 60) | timestamp_custom('%Y-%m-%d %H:%M', false) %}
    {% if minute < remaining_time %}
      {% set data_point = {'x': new_time, 'y': remaining_time - minute} %}
    {% else %}
      {% set data_point = {'x': new_time, 'y': 0} %}
    {% endif %}
    {% set _ = data_points.append(data_point) %}
  {% endfor %}
  [{{ data_points | join(', ') }}]
{% else %}
  unknown
{% endif %}'
2024-08-08 10:40:00.296 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.solar_power fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 942, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1300, in async_device_update
    await self.async_update()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 571, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 114, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 330, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 270, in _async_update_data
    raise NotImplementedError("Update method not implemented")
NotImplementedError: Update method not implemented
2024-08-08 10:40:00.386 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:40:03.044 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:40:08.632 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:40:10.385 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:40:13.056 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:40:18.057 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:40:20.409 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:40:23.631 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:40:30.296 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.solar_power fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 942, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1300, in async_device_update
    await self.async_update()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 571, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 114, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 330, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 270, in _async_update_data
    raise NotImplementedError("Update method not implemented")
NotImplementedError: Update method not implemented
2024-08-08 10:40:30.385 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:40:33.052 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:40:39.010 ERROR (SyncWorker_13) [homeassistant.components.influxdb] InfluxDB bucket is not accessible due to '(401)
Reason: Unauthorized
HTTP response headers: HTTPHeaderDict({'Content-Type': 'application/json; charset=utf-8', 'X-Influxdb-Build': 'OSS', 'X-Influxdb-Version': 'v2.7.8', 'X-Platform-Error-Code': 'unauthorized', 'Date': 'Thu, 08 Aug 2024 08:40:38 GMT', 'Content-Length': '55'})
HTTP response body: {"code":"unauthorized","message":"unauthorized access"}
'. Please check that the bucket, org and token are correct and that the token has the correct permissions set. Retrying in 60 seconds.
2024-08-08 10:40:39.345 ERROR (MainThread) [homeassistant.components.websocket_api.http.connection] [281470151290896] Error handling message: Unknown error (unknown_error) Bart from 192.168.68.24 (Mozilla/5.0 (X11; CrOS x86_64 14541.0.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36)
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/components/websocket_api/decorators.py", line 28, in _handle_async_response
    await func(hass, connection, msg)
  File "/usr/src/homeassistant/homeassistant/components/websocket_api/commands.py", line 514, in handle_manifest_list
    raise int_or_exc
homeassistant.loader.IntegrationNotFound: Integration 'watchman' not found.
2024-08-08 10:40:39.405 ERROR (MainThread) [custom_components.multiscrape.coordinator] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # Updating failed with exception: Client error '403 Forbidden' for url 'https://www.tijd.be/markten-live/fondsen/horizon-kbc-expertease-sri-highly-dynamic-tolerant-classic.616733575.html'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403
2024-08-08 10:40:39.406 ERROR (MainThread) [custom_components.multiscrape.sensor] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # BE6307337095 # Unable to scrape data: Skipped scraping because data couldn't be updated 
Consider using debug logging and log_response for further investigation.
2024-08-08 10:40:40.108 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:40:40.387 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:40:44.106 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:40:45.161 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved (None)
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 662, in state
    numerical_value = float(value)  # type:ignore[arg-type]
                      ^^^^^^^^^^^^
ValueError: could not convert string to float: '1,104.14'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 258, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 453, in _async_refresh
    self.async_update_listeners()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 168, in async_update_listeners
    update_callback()
  File "/config/custom_components/multiscrape/entity.py", line 110, in _handle_coordinator_update
    self.async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1005, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1130, in _async_write_ha_state
    self.__async_calculate_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1067, in __async_calculate_state
    state = self._stringify_state(available)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1011, in _stringify_state
    if (state := self.state) is None:
                 ^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 664, in state
    raise ValueError(
ValueError: Sensor sensor.be6307334068 has device class 'None', state class 'None' unit 'EUR' and suggested precision 'None' thus indicating it has a numeric value; however, it has the non-numeric value: '1,104.14' (<class 'str'>)
2024-08-08 10:40:49.060 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:40:50.389 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:40:55.064 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:40:59.067 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:41:00.185 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: access to attribute 'append' of 'list' object is unsafe. when rendering '{% set remaining_time = states('sensor.audi_e_tron_sportback_remaining_charge_time') | int %} {% set current_time = now().strftime('%Y-%m-%d %H:%M') %} {% set data_points = [] %} {% if remaining_time is not none %}
  {% for minute in range(0, 1440) %}
    {% set time_diff = minute | int / 60 %}
    {% set new_time = (as_timestamp(current_time) + time_diff * 60) | timestamp_custom('%Y-%m-%d %H:%M', false) %}
    {% if minute < remaining_time %}
      {% set data_point = {'x': new_time, 'y': remaining_time - minute} %}
    {% else %}
      {% set data_point = {'x': new_time, 'y': 0} %}
    {% endif %}
    {% set _ = data_points.append(data_point) %}
  {% endfor %}
  [{{ data_points | join(', ') }}]
{% else %}
  unknown
{% endif %}'
2024-08-08 10:41:00.285 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.solar_power fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 942, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1300, in async_device_update
    await self.async_update()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 571, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 114, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 330, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 270, in _async_update_data
    raise NotImplementedError("Update method not implemented")
NotImplementedError: Update method not implemented
2024-08-08 10:41:00.386 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:41:04.066 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:41:10.068 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:41:10.388 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:41:12.632 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json['items'][0].recipe.name }}'
2024-08-08 10:41:12.634 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json['items'][0].recipe.id }}'
2024-08-08 10:41:12.636 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json['items'][0].date }}'
2024-08-08 10:41:12.641 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 1 when rendering '{{ value_json['items'][1].recipe.name }}'
2024-08-08 10:41:12.643 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 1 when rendering '{{ value_json['items'][1].recipe.id }}'
2024-08-08 10:41:12.645 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 1 when rendering '{{ value_json['items'][1].date }}'
2024-08-08 10:41:12.650 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 2 when rendering '{{ value_json['items'][2].recipe.name }}'
2024-08-08 10:41:12.652 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 2 when rendering '{{ value_json['items'][2].date }}'
2024-08-08 10:41:12.660 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 3 when rendering '{{ value_json['items'][3].recipe.name }}'
2024-08-08 10:41:12.662 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 3 when rendering '{{ value_json['items'][3].date }}'
2024-08-08 10:41:12.666 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 4 when rendering '{{ value_json['items'][4].recipe.name }}'
2024-08-08 10:41:12.668 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 4 when rendering '{{ value_json['items'][4].date }}'
2024-08-08 10:41:12.674 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 5 when rendering '{{ value_json['items'][5].recipe.name }}'
2024-08-08 10:41:12.676 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 5 when rendering '{{ value_json['items'][5].date }}'
2024-08-08 10:41:12.678 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ value_json['items'][6].recipe.name }}'
2024-08-08 10:41:12.683 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ value_json['items'][6].date }}'
2024-08-08 10:41:13.983 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json[0].recipe.id }}'
2024-08-08 10:41:13.993 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json[0].recipe.name }}'
2024-08-08 10:41:14.068 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:41:19.066 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:41:20.391 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:41:25.068 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:41:29.090 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:41:30.283 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.solar_power fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 942, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1300, in async_device_update
    await self.async_update()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 571, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 114, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 330, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 270, in _async_update_data
    raise NotImplementedError("Update method not implemented")
NotImplementedError: Update method not implemented
2024-08-08 10:41:30.388 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:41:34.091 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:41:39.074 ERROR (SyncWorker_36) [homeassistant.components.influxdb] InfluxDB bucket is not accessible due to '(401)
Reason: Unauthorized
HTTP response headers: HTTPHeaderDict({'Content-Type': 'application/json; charset=utf-8', 'X-Influxdb-Build': 'OSS', 'X-Influxdb-Version': 'v2.7.8', 'X-Platform-Error-Code': 'unauthorized', 'Date': 'Thu, 08 Aug 2024 08:41:39 GMT', 'Content-Length': '55'})
HTTP response body: {"code":"unauthorized","message":"unauthorized access"}
'. Please check that the bucket, org and token are correct and that the token has the correct permissions set. Retrying in 60 seconds.
2024-08-08 10:41:39.432 ERROR (MainThread) [custom_components.multiscrape.coordinator] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # Updating failed with exception: Client error '403 Forbidden' for url 'https://www.tijd.be/markten-live/fondsen/horizon-kbc-expertease-sri-highly-dynamic-tolerant-classic.616733575.html'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403
2024-08-08 10:41:39.433 ERROR (MainThread) [custom_components.multiscrape.sensor] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # BE6307337095 # Unable to scrape data: Skipped scraping because data couldn't be updated 
Consider using debug logging and log_response for further investigation.
2024-08-08 10:41:40.066 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:41:40.387 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:41:46.124 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved (None)
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 662, in state
    numerical_value = float(value)  # type:ignore[arg-type]
                      ^^^^^^^^^^^^
ValueError: could not convert string to float: '1,104.14'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 258, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 453, in _async_refresh
    self.async_update_listeners()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 168, in async_update_listeners
    update_callback()
  File "/config/custom_components/multiscrape/entity.py", line 110, in _handle_coordinator_update
    self.async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1005, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1130, in _async_write_ha_state
    self.__async_calculate_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1067, in __async_calculate_state
    state = self._stringify_state(available)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1011, in _stringify_state
    if (state := self.state) is None:
                 ^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 664, in state
    raise ValueError(
ValueError: Sensor sensor.be6307334068 has device class 'None', state class 'None' unit 'EUR' and suggested precision 'None' thus indicating it has a numeric value; however, it has the non-numeric value: '1,104.14' (<class 'str'>)
2024-08-08 10:41:49.865 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:41:50.395 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:41:51.695 ERROR (MainThread) [homeassistant.components.script] Script with object id 'set_waarschoot_chauffage_away' could not be validated and has been disabled: expected a dictionary. Got [{'service': 'climate.set_preset_mode', 'data': {'preset_mode': 'away'}, 'target': {'entity_id': ['climate.waarschoot_living']}}, {'service': 'climate.set_hvac_mode', 'data': {'hvac_mode': 'off'}, 'target': {'entity_id': ['climate.waarschoot_keuken', 'climate.waarschoot_living', 'climate.waarschoot_zitput', 'climate.waarschoot_overloop', 'climate.waarschoot_badkamer', 'climate.waarschoot_slaapkamer']}}]
2024-08-08 10:41:51.696 ERROR (MainThread) [homeassistant.components.script] Script with object id 'set_waarschoot_chauffage_home' could not be validated and has been disabled: expected a dictionary. Got [{'service': 'climate.set_preset_mode', 'data': {'preset_mode': 'home'}, 'target': {'entity_id': ['climate.waarschoot_living']}}, {'service': 'climate.set_hvac_mode', 'data': {'hvac_mode': 'auto'}, 'target': {'entity_id': ['climate.waarschoot_keuken', 'climate.waarschoot_living', 'climate.waarschoot_zitput', 'climate.waarschoot_overloop', 'climate.waarschoot_badkamer', 'climate.waarschoot_slaapkamer']}}]
2024-08-08 10:41:55.067 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:41:59.866 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:42:00.185 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: access to attribute 'append' of 'list' object is unsafe. when rendering '{% set remaining_time = states('sensor.audi_e_tron_sportback_remaining_charge_time') | int %} {% set current_time = now().strftime('%Y-%m-%d %H:%M') %} {% set data_points = [] %} {% if remaining_time is not none %}
  {% for minute in range(0, 1440) %}
    {% set time_diff = minute | int / 60 %}
    {% set new_time = (as_timestamp(current_time) + time_diff * 60) | timestamp_custom('%Y-%m-%d %H:%M', false) %}
    {% if minute < remaining_time %}
      {% set data_point = {'x': new_time, 'y': remaining_time - minute} %}
    {% else %}
      {% set data_point = {'x': new_time, 'y': 0} %}
    {% endif %}
    {% set _ = data_points.append(data_point) %}
  {% endfor %}
  [{{ data_points | join(', ') }}]
{% else %}
  unknown
{% endif %}'
2024-08-08 10:42:00.289 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.solar_power fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 942, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1300, in async_device_update
    await self.async_update()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 571, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 114, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 330, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 270, in _async_update_data
    raise NotImplementedError("Update method not implemented")
NotImplementedError: Update method not implemented
2024-08-08 10:42:00.386 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:42:04.867 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:42:10.068 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:42:10.388 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:42:14.869 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:42:19.868 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:42:20.386 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:42:25.069 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:42:29.870 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:42:30.277 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.solar_power fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 942, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1300, in async_device_update
    await self.async_update()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 571, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 114, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 330, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 270, in _async_update_data
    raise NotImplementedError("Update method not implemented")
NotImplementedError: Update method not implemented
2024-08-08 10:42:30.386 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:42:34.868 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:42:39.096 ERROR (SyncWorker_45) [homeassistant.components.influxdb] InfluxDB bucket is not accessible due to '(401)
Reason: Unauthorized
HTTP response headers: HTTPHeaderDict({'Content-Type': 'application/json; charset=utf-8', 'X-Influxdb-Build': 'OSS', 'X-Influxdb-Version': 'v2.7.8', 'X-Platform-Error-Code': 'unauthorized', 'Date': 'Thu, 08 Aug 2024 08:42:39 GMT', 'Content-Length': '55'})
HTTP response body: {"code":"unauthorized","message":"unauthorized access"}
'. Please check that the bucket, org and token are correct and that the token has the correct permissions set. Retrying in 60 seconds.
2024-08-08 10:42:39.408 ERROR (MainThread) [custom_components.multiscrape.coordinator] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # Updating failed with exception: Client error '403 Forbidden' for url 'https://www.tijd.be/markten-live/fondsen/horizon-kbc-expertease-sri-highly-dynamic-tolerant-classic.616733575.html'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403
2024-08-08 10:42:39.409 ERROR (MainThread) [custom_components.multiscrape.sensor] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # BE6307337095 # Unable to scrape data: Skipped scraping because data couldn't be updated 
Consider using debug logging and log_response for further investigation.
2024-08-08 10:42:40.078 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:42:40.386 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:42:44.877 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:42:47.065 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved (None)
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 662, in state
    numerical_value = float(value)  # type:ignore[arg-type]
                      ^^^^^^^^^^^^
ValueError: could not convert string to float: '1,104.14'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 258, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 453, in _async_refresh
    self.async_update_listeners()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 168, in async_update_listeners
    update_callback()
  File "/config/custom_components/multiscrape/entity.py", line 110, in _handle_coordinator_update
    self.async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1005, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1130, in _async_write_ha_state
    self.__async_calculate_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1067, in __async_calculate_state
    state = self._stringify_state(available)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1011, in _stringify_state
    if (state := self.state) is None:
                 ^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 664, in state
    raise ValueError(
ValueError: Sensor sensor.be6307334068 has device class 'None', state class 'None' unit 'EUR' and suggested precision 'None' thus indicating it has a numeric value; however, it has the non-numeric value: '1,104.14' (<class 'str'>)
2024-08-08 10:42:49.878 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:42:50.396 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:42:55.083 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:42:59.884 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:43:00.185 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: access to attribute 'append' of 'list' object is unsafe. when rendering '{% set remaining_time = states('sensor.audi_e_tron_sportback_remaining_charge_time') | int %} {% set current_time = now().strftime('%Y-%m-%d %H:%M') %} {% set data_points = [] %} {% if remaining_time is not none %}
  {% for minute in range(0, 1440) %}
    {% set time_diff = minute | int / 60 %}
    {% set new_time = (as_timestamp(current_time) + time_diff * 60) | timestamp_custom('%Y-%m-%d %H:%M', false) %}
    {% if minute < remaining_time %}
      {% set data_point = {'x': new_time, 'y': remaining_time - minute} %}
    {% else %}
      {% set data_point = {'x': new_time, 'y': 0} %}
    {% endif %}
    {% set _ = data_points.append(data_point) %}
  {% endfor %}
  [{{ data_points | join(', ') }}]
{% else %}
  unknown
{% endif %}'
2024-08-08 10:43:00.277 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.solar_power fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 942, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1300, in async_device_update
    await self.async_update()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 571, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 114, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 330, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 270, in _async_update_data
    raise NotImplementedError("Update method not implemented")
NotImplementedError: Update method not implemented
2024-08-08 10:43:00.386 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:43:04.882 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:43:08.816 ERROR (MainThread) [homeassistant] Error doing job: Exception in callback _TrackTimeInterval._interval_listener(<Job track ti... of ...>>)>)>>) (None)
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 1640, in _interval_listener
    self.hass.async_run_hass_job(self._run_job, dt_util.utcnow(), background=True)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/generic_hygrostat/binary_sensor.py", line 147, in _async_update
    self.update_humidity()
  File "/config/custom_components/generic_hygrostat/binary_sensor.py", line 187, in update_humidity
    self.sensor_humidity = float(sensor.attributes[self.sensor_attribute])
                                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'humidity'
2024-08-08 10:43:10.093 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:43:10.386 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:43:12.633 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json['items'][0].recipe.name }}'
2024-08-08 10:43:12.636 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json['items'][0].recipe.id }}'
2024-08-08 10:43:12.638 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json['items'][0].date }}'
2024-08-08 10:43:12.643 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 1 when rendering '{{ value_json['items'][1].recipe.name }}'
2024-08-08 10:43:12.645 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 1 when rendering '{{ value_json['items'][1].recipe.id }}'
2024-08-08 10:43:12.650 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 1 when rendering '{{ value_json['items'][1].date }}'
2024-08-08 10:43:12.658 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 2 when rendering '{{ value_json['items'][2].recipe.name }}'
2024-08-08 10:43:12.660 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 2 when rendering '{{ value_json['items'][2].date }}'
2024-08-08 10:43:12.665 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 3 when rendering '{{ value_json['items'][3].recipe.name }}'
2024-08-08 10:43:12.667 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 3 when rendering '{{ value_json['items'][3].date }}'
2024-08-08 10:43:12.669 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 4 when rendering '{{ value_json['items'][4].recipe.name }}'
2024-08-08 10:43:12.675 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 4 when rendering '{{ value_json['items'][4].date }}'
2024-08-08 10:43:12.677 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 5 when rendering '{{ value_json['items'][5].recipe.name }}'
2024-08-08 10:43:12.682 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 5 when rendering '{{ value_json['items'][5].date }}'
2024-08-08 10:43:12.684 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ value_json['items'][6].recipe.name }}'
2024-08-08 10:43:12.691 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ value_json['items'][6].date }}'
2024-08-08 10:43:13.987 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json[0].recipe.id }}'
2024-08-08 10:43:13.996 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json[0].recipe.name }}'
2024-08-08 10:43:14.872 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:43:20.407 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:43:25.102 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:43:29.877 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:43:30.272 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.solar_power fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 942, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1300, in async_device_update
    await self.async_update()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 571, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 114, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 330, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 270, in _async_update_data
    raise NotImplementedError("Update method not implemented")
NotImplementedError: Update method not implemented
2024-08-08 10:43:30.385 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:43:34.875 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:43:39.110 ERROR (SyncWorker_27) [homeassistant.components.influxdb] InfluxDB bucket is not accessible due to '(401)
Reason: Unauthorized
HTTP response headers: HTTPHeaderDict({'Content-Type': 'application/json; charset=utf-8', 'X-Influxdb-Build': 'OSS', 'X-Influxdb-Version': 'v2.7.8', 'X-Platform-Error-Code': 'unauthorized', 'Date': 'Thu, 08 Aug 2024 08:43:39 GMT', 'Content-Length': '55'})
HTTP response body: {"code":"unauthorized","message":"unauthorized access"}
'. Please check that the bucket, org and token are correct and that the token has the correct permissions set. Retrying in 60 seconds.
2024-08-08 10:43:39.397 ERROR (MainThread) [custom_components.multiscrape.coordinator] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # Updating failed with exception: Client error '403 Forbidden' for url 'https://www.tijd.be/markten-live/fondsen/horizon-kbc-expertease-sri-highly-dynamic-tolerant-classic.616733575.html'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403
2024-08-08 10:43:39.397 ERROR (MainThread) [custom_components.multiscrape.sensor] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # BE6307337095 # Unable to scrape data: Skipped scraping because data couldn't be updated 
Consider using debug logging and log_response for further investigation.
2024-08-08 10:43:40.076 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:43:40.386 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:43:43.752 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved (None)
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 258, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 453, in _async_refresh
    self.async_update_listeners()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 168, in async_update_listeners
    update_callback()
  File "/usr/src/homeassistant/homeassistant/components/scrape/sensor.py", line 236, in _handle_coordinator_update
    self._async_update_from_rest_data()
  File "/usr/src/homeassistant/homeassistant/components/scrape/sensor.py", line 206, in _async_update_from_rest_data
    value = self._extract_value()
            ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/components/scrape/sensor.py", line 183, in _extract_value
    tag = raw_data.select(self._select)[self._index]
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/bs4/element.py", line 2116, in select
    return self.css.select(selector, namespaces, limit, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/bs4/css.py", line 162, in select
    self.api.select(
  File "/usr/local/lib/python3.12/site-packages/soupsieve/__init__.py", line 147, in select
    return compile(select, namespaces, flags, **kwargs).select(tag, limit)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/soupsieve/__init__.py", line 65, in compile
    return cp._cached_css_compile(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/soupsieve/css_parser.py", line 208, in _cached_css_compile
    ).process_selectors(),
      ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/soupsieve/css_parser.py", line 1129, in process_selectors
    return self.parse_selectors(self.selector_iter(self.pattern), index, flags)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/soupsieve/css_parser.py", line 965, in parse_selectors
    key, m = next(iselector)
             ^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/soupsieve/css_parser.py", line 1122, in selector_iter
    raise SelectorSyntaxError(msg, self.pattern, index)
soupsieve.util.SelectorSyntaxError: Invalid character '<' position 0
  line 1:
<span _ngcontent-app-root-c173="">Offline</span>
^
2024-08-08 10:43:44.875 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:43:46.933 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved (None)
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 662, in state
    numerical_value = float(value)  # type:ignore[arg-type]
                      ^^^^^^^^^^^^
ValueError: could not convert string to float: '1,104.14'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 258, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 453, in _async_refresh
    self.async_update_listeners()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 168, in async_update_listeners
    update_callback()
  File "/config/custom_components/multiscrape/entity.py", line 110, in _handle_coordinator_update
    self.async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1005, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1130, in _async_write_ha_state
    self.__async_calculate_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1067, in __async_calculate_state
    state = self._stringify_state(available)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1011, in _stringify_state
    if (state := self.state) is None:
                 ^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 664, in state
    raise ValueError(
ValueError: Sensor sensor.be6307334068 has device class 'None', state class 'None' unit 'EUR' and suggested precision 'None' thus indicating it has a numeric value; however, it has the non-numeric value: '1,104.14' (<class 'str'>)
2024-08-08 10:43:49.877 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:43:50.385 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:43:55.132 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:43:59.891 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:44:00.185 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: access to attribute 'append' of 'list' object is unsafe. when rendering '{% set remaining_time = states('sensor.audi_e_tron_sportback_remaining_charge_time') | int %} {% set current_time = now().strftime('%Y-%m-%d %H:%M') %} {% set data_points = [] %} {% if remaining_time is not none %}
  {% for minute in range(0, 1440) %}
    {% set time_diff = minute | int / 60 %}
    {% set new_time = (as_timestamp(current_time) + time_diff * 60) | timestamp_custom('%Y-%m-%d %H:%M', false) %}
    {% if minute < remaining_time %}
      {% set data_point = {'x': new_time, 'y': remaining_time - minute} %}
    {% else %}
      {% set data_point = {'x': new_time, 'y': 0} %}
    {% endif %}
    {% set _ = data_points.append(data_point) %}
  {% endfor %}
  [{{ data_points | join(', ') }}]
{% else %}
  unknown
{% endif %}'
2024-08-08 10:44:00.291 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.solar_power fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 942, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1300, in async_device_update
    await self.async_update()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 571, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 114, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 330, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 270, in _async_update_data
    raise NotImplementedError("Update method not implemented")
NotImplementedError: Update method not implemented
2024-08-08 10:44:00.385 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:44:04.914 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:44:10.092 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:44:10.386 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:44:14.916 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:44:19.916 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:44:20.388 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:44:25.095 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:44:29.944 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:44:30.289 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.solar_power fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 942, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1300, in async_device_update
    await self.async_update()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 571, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 114, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 330, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 270, in _async_update_data
    raise NotImplementedError("Update method not implemented")
NotImplementedError: Update method not implemented
2024-08-08 10:44:30.386 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:44:35.009 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:44:39.126 ERROR (SyncWorker_20) [homeassistant.components.influxdb] InfluxDB bucket is not accessible due to '(401)
Reason: Unauthorized
HTTP response headers: HTTPHeaderDict({'Content-Type': 'application/json; charset=utf-8', 'X-Influxdb-Build': 'OSS', 'X-Influxdb-Version': 'v2.7.8', 'X-Platform-Error-Code': 'unauthorized', 'Date': 'Thu, 08 Aug 2024 08:44:39 GMT', 'Content-Length': '55'})
HTTP response body: {"code":"unauthorized","message":"unauthorized access"}
'. Please check that the bucket, org and token are correct and that the token has the correct permissions set. Retrying in 60 seconds.
2024-08-08 10:44:39.428 ERROR (MainThread) [custom_components.multiscrape.coordinator] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # Updating failed with exception: Client error '403 Forbidden' for url 'https://www.tijd.be/markten-live/fondsen/horizon-kbc-expertease-sri-highly-dynamic-tolerant-classic.616733575.html'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403
2024-08-08 10:44:39.428 ERROR (MainThread) [custom_components.multiscrape.sensor] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # BE6307337095 # Unable to scrape data: Skipped scraping because data couldn't be updated 
Consider using debug logging and log_response for further investigation.
2024-08-08 10:44:40.093 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:44:40.389 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:44:44.992 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:44:46.965 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved (None)
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 662, in state
    numerical_value = float(value)  # type:ignore[arg-type]
                      ^^^^^^^^^^^^
ValueError: could not convert string to float: '1,104.14'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 258, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 453, in _async_refresh
    self.async_update_listeners()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 168, in async_update_listeners
    update_callback()
  File "/config/custom_components/multiscrape/entity.py", line 110, in _handle_coordinator_update
    self.async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1005, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1130, in _async_write_ha_state
    self.__async_calculate_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1067, in __async_calculate_state
    state = self._stringify_state(available)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1011, in _stringify_state
    if (state := self.state) is None:
                 ^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 664, in state
    raise ValueError(
ValueError: Sensor sensor.be6307334068 has device class 'None', state class 'None' unit 'EUR' and suggested precision 'None' thus indicating it has a numeric value; however, it has the non-numeric value: '1,104.14' (<class 'str'>)
2024-08-08 10:44:49.999 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:44:50.401 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:44:55.090 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:44:58.745 ERROR (MainThread) [homeassistant.components.script] Script with object id 'set_waarschoot_chauffage_away' could not be validated and has been disabled: expected a dictionary. Got [{'action': 'climate.set_preset_mode', 'data': {'preset_mode': 'away'}, 'target': {'entity_id': ['climate.waarschoot_living']}}, {'action': 'climate.set_hvac_mode', 'data': {'hvac_mode': 'off'}, 'target': {'entity_id': ['climate.waarschoot_keuken', 'climate.waarschoot_living', 'climate.waarschoot_zitput', 'climate.waarschoot_overloop', 'climate.waarschoot_badkamer', 'climate.waarschoot_slaapkamer']}}]
2024-08-08 10:44:58.746 ERROR (MainThread) [homeassistant.components.script] Script with object id 'set_waarschoot_chauffage_home' could not be validated and has been disabled: expected a dictionary. Got [{'action': 'climate.set_preset_mode', 'data': {'preset_mode': 'home'}, 'target': {'entity_id': ['climate.waarschoot_living']}}, {'action': 'climate.set_hvac_mode', 'data': {'hvac_mode': 'auto'}, 'target': {'entity_id': ['climate.waarschoot_keuken', 'climate.waarschoot_living', 'climate.waarschoot_zitput', 'climate.waarschoot_overloop', 'climate.waarschoot_badkamer', 'climate.waarschoot_slaapkamer']}}]
2024-08-08 10:45:00.168 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:45:00.192 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: access to attribute 'append' of 'list' object is unsafe. when rendering '{% set remaining_time = states('sensor.audi_e_tron_sportback_remaining_charge_time') | int %} {% set current_time = now().strftime('%Y-%m-%d %H:%M') %} {% set data_points = [] %} {% if remaining_time is not none %}
  {% for minute in range(0, 1440) %}
    {% set time_diff = minute | int / 60 %}
    {% set new_time = (as_timestamp(current_time) + time_diff * 60) | timestamp_custom('%Y-%m-%d %H:%M', false) %}
    {% if minute < remaining_time %}
      {% set data_point = {'x': new_time, 'y': remaining_time - minute} %}
    {% else %}
      {% set data_point = {'x': new_time, 'y': 0} %}
    {% endif %}
    {% set _ = data_points.append(data_point) %}
  {% endfor %}
  [{{ data_points | join(', ') }}]
{% else %}
  unknown
{% endif %}'
2024-08-08 10:45:00.293 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.solar_power fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 942, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1300, in async_device_update
    await self.async_update()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 571, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 114, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 330, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 270, in _async_update_data
    raise NotImplementedError("Update method not implemented")
NotImplementedError: Update method not implemented
2024-08-08 10:45:00.420 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:45:05.166 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:45:10.228 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:45:10.385 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:45:12.629 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json['items'][0].recipe.name }}'
2024-08-08 10:45:12.632 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json['items'][0].recipe.id }}'
2024-08-08 10:45:12.633 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json['items'][0].date }}'
2024-08-08 10:45:12.636 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 1 when rendering '{{ value_json['items'][1].recipe.name }}'
2024-08-08 10:45:12.638 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 1 when rendering '{{ value_json['items'][1].recipe.id }}'
2024-08-08 10:45:12.640 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 1 when rendering '{{ value_json['items'][1].date }}'
2024-08-08 10:45:12.642 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 2 when rendering '{{ value_json['items'][2].recipe.name }}'
2024-08-08 10:45:12.644 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 2 when rendering '{{ value_json['items'][2].date }}'
2024-08-08 10:45:12.646 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 3 when rendering '{{ value_json['items'][3].recipe.name }}'
2024-08-08 10:45:12.648 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 3 when rendering '{{ value_json['items'][3].date }}'
2024-08-08 10:45:12.650 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 4 when rendering '{{ value_json['items'][4].recipe.name }}'
2024-08-08 10:45:12.652 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 4 when rendering '{{ value_json['items'][4].date }}'
2024-08-08 10:45:12.655 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 5 when rendering '{{ value_json['items'][5].recipe.name }}'
2024-08-08 10:45:12.657 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 5 when rendering '{{ value_json['items'][5].date }}'
2024-08-08 10:45:12.659 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ value_json['items'][6].recipe.name }}'
2024-08-08 10:45:12.661 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ value_json['items'][6].date }}'
2024-08-08 10:45:13.992 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json[0].recipe.id }}'
2024-08-08 10:45:14.001 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json[0].recipe.name }}'
2024-08-08 10:45:15.230 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:45:20.247 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:45:20.396 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:45:25.230 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:45:30.232 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:45:30.283 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.solar_power fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 942, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1300, in async_device_update
    await self.async_update()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 571, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 114, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 330, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 270, in _async_update_data
    raise NotImplementedError("Update method not implemented")
NotImplementedError: Update method not implemented
2024-08-08 10:45:30.387 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:45:35.231 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:45:39.145 ERROR (SyncWorker_57) [homeassistant.components.influxdb] InfluxDB bucket is not accessible due to '(401)
Reason: Unauthorized
HTTP response headers: HTTPHeaderDict({'Content-Type': 'application/json; charset=utf-8', 'X-Influxdb-Build': 'OSS', 'X-Influxdb-Version': 'v2.7.8', 'X-Platform-Error-Code': 'unauthorized', 'Date': 'Thu, 08 Aug 2024 08:45:39 GMT', 'Content-Length': '55'})
HTTP response body: {"code":"unauthorized","message":"unauthorized access"}
'. Please check that the bucket, org and token are correct and that the token has the correct permissions set. Retrying in 60 seconds.
2024-08-08 10:45:39.402 ERROR (MainThread) [custom_components.multiscrape.coordinator] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # Updating failed with exception: Client error '403 Forbidden' for url 'https://www.tijd.be/markten-live/fondsen/horizon-kbc-expertease-sri-highly-dynamic-tolerant-classic.616733575.html'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403
2024-08-08 10:45:39.402 ERROR (MainThread) [custom_components.multiscrape.sensor] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # BE6307337095 # Unable to scrape data: Skipped scraping because data couldn't be updated 
Consider using debug logging and log_response for further investigation.
2024-08-08 10:45:40.235 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:45:40.387 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:45:45.257 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:45:47.008 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved (None)
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 662, in state
    numerical_value = float(value)  # type:ignore[arg-type]
                      ^^^^^^^^^^^^
ValueError: could not convert string to float: '1,104.14'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 258, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 453, in _async_refresh
    self.async_update_listeners()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 168, in async_update_listeners
    update_callback()
  File "/config/custom_components/multiscrape/entity.py", line 110, in _handle_coordinator_update
    self.async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1005, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1130, in _async_write_ha_state
    self.__async_calculate_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1067, in __async_calculate_state
    state = self._stringify_state(available)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1011, in _stringify_state
    if (state := self.state) is None:
                 ^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 664, in state
    raise ValueError(
ValueError: Sensor sensor.be6307334068 has device class 'None', state class 'None' unit 'EUR' and suggested precision 'None' thus indicating it has a numeric value; however, it has the non-numeric value: '1,104.14' (<class 'str'>)
2024-08-08 10:45:50.272 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:45:50.385 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:45:55.233 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:46:00.185 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: access to attribute 'append' of 'list' object is unsafe. when rendering '{% set remaining_time = states('sensor.audi_e_tron_sportback_remaining_charge_time') | int %} {% set current_time = now().strftime('%Y-%m-%d %H:%M') %} {% set data_points = [] %} {% if remaining_time is not none %}
  {% for minute in range(0, 1440) %}
    {% set time_diff = minute | int / 60 %}
    {% set new_time = (as_timestamp(current_time) + time_diff * 60) | timestamp_custom('%Y-%m-%d %H:%M', false) %}
    {% if minute < remaining_time %}
      {% set data_point = {'x': new_time, 'y': remaining_time - minute} %}
    {% else %}
      {% set data_point = {'x': new_time, 'y': 0} %}
    {% endif %}
    {% set _ = data_points.append(data_point) %}
  {% endfor %}
  [{{ data_points | join(', ') }}]
{% else %}
  unknown
{% endif %}'
2024-08-08 10:46:00.284 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:46:00.298 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.solar_power fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 942, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1300, in async_device_update
    await self.async_update()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 571, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 114, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 330, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 270, in _async_update_data
    raise NotImplementedError("Update method not implemented")
NotImplementedError: Update method not implemented
2024-08-08 10:46:00.387 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:46:05.240 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:46:10.238 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:46:10.385 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:46:15.263 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:46:22.113 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:46:22.207 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:46:27.137 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:46:30.296 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.solar_power fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 942, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1300, in async_device_update
    await self.async_update()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 571, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 114, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 330, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 270, in _async_update_data
    raise NotImplementedError("Update method not implemented")
NotImplementedError: Update method not implemented
2024-08-08 10:46:30.386 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:46:32.135 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:46:35.113 ERROR (MainThread) [homeassistant.components.script] Script with object id 'set_waarschoot_chauffage_away' could not be validated and has been disabled: expected a dictionary. Got [{'action': 'climate.set_preset_mode', 'data': {'preset_mode': 'away'}, 'target': {'entity_id': ['climate.waarschoot_living']}}, {'action': 'climate.set_hvac_mode', 'data': {'hvac_mode': 'off'}, 'target': {'entity_id': ['climate.waarschoot_keuken', 'climate.waarschoot_living', 'climate.waarschoot_zitput', 'climate.waarschoot_overloop', 'climate.waarschoot_badkamer', 'climate.waarschoot_slaapkamer']}}]
2024-08-08 10:46:35.114 ERROR (MainThread) [homeassistant.components.script] Script with object id 'set_waarschoot_chauffage_home' could not be validated and has been disabled: expected a dictionary. Got [{'action': 'climate.set_preset_mode', 'data': {'preset_mode': 'home'}, 'target': {'entity_id': ['climate.waarschoot_living']}}, {'action': 'climate.set_hvac_mode', 'data': {'hvac_mode': 'auto'}, 'target': {'entity_id': ['climate.waarschoot_keuken', 'climate.waarschoot_living', 'climate.waarschoot_zitput', 'climate.waarschoot_overloop', 'climate.waarschoot_badkamer', 'climate.waarschoot_slaapkamer']}}]
2024-08-08 10:46:37.586 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:46:39.160 ERROR (SyncWorker_4) [homeassistant.components.influxdb] InfluxDB bucket is not accessible due to '(401)
Reason: Unauthorized
HTTP response headers: HTTPHeaderDict({'Content-Type': 'application/json; charset=utf-8', 'X-Influxdb-Build': 'OSS', 'X-Influxdb-Version': 'v2.7.8', 'X-Platform-Error-Code': 'unauthorized', 'Date': 'Thu, 08 Aug 2024 08:46:39 GMT', 'Content-Length': '55'})
HTTP response body: {"code":"unauthorized","message":"unauthorized access"}
'. Please check that the bucket, org and token are correct and that the token has the correct permissions set. Retrying in 60 seconds.
2024-08-08 10:46:39.393 ERROR (MainThread) [custom_components.multiscrape.coordinator] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # Updating failed with exception: Client error '403 Forbidden' for url 'https://www.tijd.be/markten-live/fondsen/horizon-kbc-expertease-sri-highly-dynamic-tolerant-classic.616733575.html'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403
2024-08-08 10:46:39.394 ERROR (MainThread) [custom_components.multiscrape.sensor] Horizon - KBC Highly Dynamic Tolerant Responsible Investing Classic Shares # BE6307337095 # Unable to scrape data: Skipped scraping because data couldn't be updated 
Consider using debug logging and log_response for further investigation.
2024-08-08 10:46:40.416 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:46:42.584 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:46:47.040 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved (None)
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 662, in state
    numerical_value = float(value)  # type:ignore[arg-type]
                      ^^^^^^^^^^^^
ValueError: could not convert string to float: '1,104.14'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 258, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 453, in _async_refresh
    self.async_update_listeners()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 168, in async_update_listeners
    update_callback()
  File "/config/custom_components/multiscrape/entity.py", line 110, in _handle_coordinator_update
    self.async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1005, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1130, in _async_write_ha_state
    self.__async_calculate_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1067, in __async_calculate_state
    state = self._stringify_state(available)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1011, in _stringify_state
    if (state := self.state) is None:
                 ^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/components/sensor/__init__.py", line 664, in state
    raise ValueError(
ValueError: Sensor sensor.be6307334068 has device class 'None', state class 'None' unit 'EUR' and suggested precision 'None' thus indicating it has a numeric value; however, it has the non-numeric value: '1,104.14' (<class 'str'>)
2024-08-08 10:46:47.585 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:46:50.387 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:46:52.584 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:46:57.767 ERROR (MainThread) [homeassistant.components.generic.camera] Error getting new camera image from Mealie maaltijd vandaag: Client error '404 Not Found' for url 'http://192.168.68.100:9925/api/media/recipes/unknown/images/min-original.webp'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2024-08-08 10:46:57.863 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:47:00.186 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: access to attribute 'append' of 'list' object is unsafe. when rendering '{% set remaining_time = states('sensor.audi_e_tron_sportback_remaining_charge_time') | int %} {% set current_time = now().strftime('%Y-%m-%d %H:%M') %} {% set data_points = [] %} {% if remaining_time is not none %}
  {% for minute in range(0, 1440) %}
    {% set time_diff = minute | int / 60 %}
    {% set new_time = (as_timestamp(current_time) + time_diff * 60) | timestamp_custom('%Y-%m-%d %H:%M', false) %}
    {% if minute < remaining_time %}
      {% set data_point = {'x': new_time, 'y': remaining_time - minute} %}
    {% else %}
      {% set data_point = {'x': new_time, 'y': 0} %}
    {% endif %}
    {% set _ = data_points.append(data_point) %}
  {% endfor %}
  [{{ data_points | join(', ') }}]
{% else %}
  unknown
{% endif %}'
2024-08-08 10:47:00.284 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.solar_power fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 942, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1300, in async_device_update
    await self.async_update()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 571, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 114, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 330, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 270, in _async_update_data
    raise NotImplementedError("Update method not implemented")
NotImplementedError: Update method not implemented
2024-08-08 10:47:00.387 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:47:02.860 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:47:07.862 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:47:10.387 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:47:12.623 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json['items'][0].recipe.name }}'
2024-08-08 10:47:12.625 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json['items'][0].recipe.id }}'
2024-08-08 10:47:12.627 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json['items'][0].date }}'
2024-08-08 10:47:12.632 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 1 when rendering '{{ value_json['items'][1].recipe.name }}'
2024-08-08 10:47:12.636 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 1 when rendering '{{ value_json['items'][1].recipe.id }}'
2024-08-08 10:47:12.640 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 1 when rendering '{{ value_json['items'][1].date }}'
2024-08-08 10:47:12.642 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 2 when rendering '{{ value_json['items'][2].recipe.name }}'
2024-08-08 10:47:12.643 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 2 when rendering '{{ value_json['items'][2].date }}'
2024-08-08 10:47:12.650 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 3 when rendering '{{ value_json['items'][3].recipe.name }}'
2024-08-08 10:47:12.652 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 3 when rendering '{{ value_json['items'][3].date }}'
2024-08-08 10:47:12.654 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 4 when rendering '{{ value_json['items'][4].recipe.name }}'
2024-08-08 10:47:12.659 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 4 when rendering '{{ value_json['items'][4].date }}'
2024-08-08 10:47:12.661 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 5 when rendering '{{ value_json['items'][5].recipe.name }}'
2024-08-08 10:47:12.669 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 5 when rendering '{{ value_json['items'][5].date }}'
2024-08-08 10:47:12.671 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ value_json['items'][6].recipe.name }}'
2024-08-08 10:47:12.676 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ value_json['items'][6].date }}'
2024-08-08 10:47:12.861 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:47:14.035 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json[0].recipe.id }}'
2024-08-08 10:47:14.044 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 0 when rendering '{{ value_json[0].recipe.name }}'
2024-08-08 10:47:15.030 ERROR (MainThread) [homeassistant.components.script] Script with object id 'set_waarschoot_chauffage_away' could not be validated and has been disabled: expected a dictionary. Got [{'action': 'climate.set_preset_mode', 'data': {'preset_mode': 'away'}, 'target': {'entity_id': ['climate.waarschoot_living']}}, {'action': 'climate.set_hvac_mode', 'data': {'hvac_mode': 'off'}, 'target': {'entity_id': ['climate.waarschoot_keuken', 'climate.waarschoot_living', 'climate.waarschoot_zitput', 'climate.waarschoot_overloop', 'climate.waarschoot_badkamer', 'climate.waarschoot_slaapkamer']}}]
2024-08-08 10:47:15.030 ERROR (MainThread) [homeassistant.components.script] Script with object id 'set_waarschoot_chauffage_home' could not be validated and has been disabled: expected a dictionary. Got [{'action': 'climate.set_preset_mode', 'data': {'preset_mode': 'home'}, 'target': {'entity_id': ['climate.waarschoot_living']}}, {'action': 'climate.set_hvac_mode', 'data': {'hvac_mode': 'auto'}, 'target': {'entity_id': ['climate.waarschoot_keuken', 'climate.waarschoot_living', 'climate.waarschoot_zitput', 'climate.waarschoot_overloop', 'climate.waarschoot_badkamer', 'climate.waarschoot_slaapkamer']}}]
2024-08-08 10:47:17.865 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:47:22.008 ERROR (MainThread) [homeassistant.components.script] Script with object id 'set_waarschoot_chauffage_away' could not be validated and has been disabled: expected a dictionary. Got [{'action': 'climate.set_preset_mode', 'data': {'preset_mode': 'away'}, 'target': {'entity_id': ['climate.waarschoot_living']}}, {'action': 'climate.set_hvac_mode', 'data': {'hvac_mode': 'off'}, 'target': {'entity_id': ['climate.waarschoot_keuken', 'climate.waarschoot_living', 'climate.waarschoot_zitput', 'climate.waarschoot_overloop', 'climate.waarschoot_badkamer', 'climate.waarschoot_slaapkamer']}}]
2024-08-08 10:47:22.009 ERROR (MainThread) [homeassistant.components.script] Script with object id 'set_waarschoot_chauffage_home' could not be validated and has been disabled: expected a dictionary. Got [{'action': 'climate.set_preset_mode', 'data': {'preset_mode': 'home'}, 'target': {'entity_id': ['climate.waarschoot_living']}}, {'action': 'climate.set_hvac_mode', 'data': {'hvac_mode': 'auto'}, 'target': {'entity_id': ['climate.waarschoot_keuken', 'climate.waarschoot_living', 'climate.waarschoot_zitput', 'climate.waarschoot_overloop', 'climate.waarschoot_badkamer', 'climate.waarschoot_slaapkamer']}}]
2024-08-08 10:47:23.438 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:47:23.563 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:47:28.462 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.charger_current_power to <Job track state_changed event ['sensor.charger_current_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff6ba34c50>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:47:29.023 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('ValueError: Template error: float got invalid input 'unavailable' when rendering template '{% set sp = states('sensor.sma_energy_total') | float %} {% set nc = states('sensor.net_consumption_energy_total') | float %} {% set ni = states('sensor.net_injection_energy_total') | float %} {{ ((sp - ni ) / ( sp - ni + nc) * 100 ) | round(1) }}' but no default was specified') while processing template 'Template<template=({% set sp = states('sensor.sma_energy_total') | float %} {% set nc = states('sensor.net_consumption_energy_total') | float %} {% set ni = states('sensor.net_injection_energy_total') | float %} {{ ((sp - ni ) / ( sp - ni + nc) * 100 ) | round(1) }}) renders=66>' for attribute '_attr_native_value' in entity 'sensor.net_neutrality'
2024-08-08 10:47:29.024 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('ValueError: Template error: float got invalid input 'unavailable' when rendering template '{% set sp = states('sensor.sma_energy_total') | float %} {% set nc = states('sensor.net_consumption_energy_total') | float %} {% set ni = states('sensor.net_injection_energy_total') | float %} {% set car_net = states('sensor.car_charge_net_energy') | round() %} {% set car_sun = states('sensor.car_charge_solar_energy') | round() %} {{ (((sp - ni - car_sun) / (sp - ni + nc - car_net - car_sun) ) * 100 ) | round(1) }}' but no default was specified') while processing template 'Template<template=({% set sp = states('sensor.sma_energy_total') | float %} {% set nc = states('sensor.net_consumption_energy_total') | float %} {% set ni = states('sensor.net_injection_energy_total') | float %} {% set car_net = states('sensor.car_charge_net_energy') | round() %} {% set car_sun = states('sensor.car_charge_solar_energy') | round() %} {{ (((sp - ni - car_sun) / (sp - ni + nc - car_net - car_sun) ) * 100 ) | round(1) }}) renders=342>' for attribute '_attr_native_value' in entity 'sensor.net_neutrality_home'
2024-08-08 10:47:29.030 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('ValueError: Template error: float got invalid input 'unavailable' when rendering template '{% set sp = states('sensor.sma_energy_total') | float %} {% set ni = states('sensor.net_injection_energy_total') | float %} {{ sp - ni }}' but no default was specified') while processing template 'Template<template=({% set sp = states('sensor.sma_energy_total') | float %} {% set ni = states('sensor.net_injection_energy_total') | float %} {{ sp - ni }}) renders=16>' for attribute '_attr_native_value' in entity 'sensor.solar_self_consumption'
2024-08-08 10:47:29.032 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('ValueError: Template error: float got invalid input 'unavailable' when rendering template '{% set sp = states('sensor.sma_today') | float %} {% set nc = states('sensor.net_consumption_daily') | float %} {% set ni = states('sensor.net_injection_daily') | float %} {{ ((sp - ni ) / ( sp - ni + nc) * 100 ) | round() }}' but no default was specified') while processing template 'Template<template=({% set sp = states('sensor.sma_today') | float %} {% set nc = states('sensor.net_consumption_daily') | float %} {% set ni = states('sensor.net_injection_daily') | float %} {{ ((sp - ni ) / ( sp - ni + nc) * 100 ) | round() }}) renders=124>' for attribute '_attr_native_value' in entity 'sensor.net_neutrality_today'
2024-08-08 10:47:29.033 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('ZeroDivisionError: float division by zero') while processing template 'Template<template=({% set sp = states('sensor.sma_today') | float(default=0) %} {% set ni = states('sensor.net_injection_daily') | float %} {{ (((sp - ni ) / sp) * 100 ) | round() }}) renders=76>' for attribute '_attr_native_value' in entity 'sensor.solar_selfconsumption_today'
2024-08-08 10:47:29.125 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.126 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.127 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.127 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.128 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.128 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.129 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.129 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.133 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.134 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.135 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.135 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.136 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.137 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.138 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.138 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.139 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.139 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.139 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.140 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.140 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.140 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.141 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.141 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.141 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.142 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.142 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.142 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:29.197 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('ValueError: Template error: float got invalid input 'unavailable' when rendering template '{{ (states('sensor.solar_terraszijde_energie_daily') | float / 6150 * 1000 * 100) | round(1) }}' but no default was specified') while processing template 'Template<template=({{ (states('sensor.solar_terraszijde_energie_daily') | float / 6150 * 1000 * 100) | round(1) }}) renders=38>' for attribute '_attr_native_value' in entity 'sensor.solar_terraszijde_efficiency'
2024-08-08 10:47:29.199 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('ValueError: Template error: float got invalid input 'unavailable' when rendering template '{{ (states('sensor.solar_voorzijde_energie_daily') | float / 8610 * 1000 * 100) | round(1) }}' but no default was specified') while processing template 'Template<template=({{ (states('sensor.solar_voorzijde_energie_daily') | float / 8610 * 1000 * 100) | round(1) }}) renders=40>' for attribute '_attr_native_value' in entity 'sensor.solar_voorzijde_efficiency'
2024-08-08 10:47:30.263 ERROR (MainThread) [homeassistant.components.automation.car_1_charge_met_zon_start_bezig_stop_nieuw] Error rendering variables: ValueError: Template error: float got invalid input 'unavailable' when rendering template '{{ states('sensor.charger_modbus_maxcurrent') | float() }}' but no default was specified
2024-08-08 10:47:30.282 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.solar_power fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 942, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 1300, in async_device_update
    await self.async_update()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 571, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 114, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 330, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 270, in _async_update_data
    raise NotImplementedError("Update method not implemented")
NotImplementedError: Update method not implemented
2024-08-08 10:47:30.343 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:30.345 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:30.346 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:30.347 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:30.348 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:30.349 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:30.351 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:30.352 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:30.353 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:30.354 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:30.355 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:30.356 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:30.357 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:30.358 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:30.358 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:30.359 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:30.359 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:30.359 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:30.359 ERROR (MainThread) [homeassistant] Error doing job: Future exception was never retrieved (None)
aiodns.error.DNSError: (4, 'Domain name not found')
2024-08-08 10:47:30.386 ERROR (MainThread) [homeassistant.helpers.event] Error while dispatching event for sensor.solar_power to <Job track state_changed event ['sensor.solar_power'] HassJobType.Callback <bound method SimulatedBatteryHandle.async_reading_handler of <custom_components.battery_sim.SimulatedBatteryHandle object at 0xffff547faa80>>>
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/event.py", line 352, in _async_dispatch_entity_id_event
    hass.async_run_hass_job(job, event)
  File "/usr/src/homeassistant/homeassistant/core.py", line 938, in async_run_hass_job
    hassjob.target(*args)
  File "/config/custom_components/battery_sim/__init__.py", line 337, in async_reading_handler
    new_state_value = float(new_state.state) * conversion_factor
                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'conversion_factor' where it is not associated with a value
2024-08-08 10:47:33.649 ERROR (MainThread) [homeassistant.components.shelly] Unexpected error fetching Shelly EM3 data
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/asyncio/selector_events.py", line 1265, in sendto
    self._sock.sendto(data, addr)
    ^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'sendto'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 354, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/src/homeassistant/homeassistant/components/shelly/coordinator.py", line 362, in _async_update_data
    await self.device.update()
  File "/usr/local/lib/python3.12/site-packages/aioshelly/block_device/device.py", line 232, in update
    event = await self._coap_request("s")
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/aioshelly/block_device/device.py", line 295, in _coap_request
    await self.coap_context.request(self.ip_address, path)
  File "/usr/local/lib/python3.12/site-packages/aioshelly/block_device/coap.py", line 185, in request
    self.transport.sendto(msg, (ip, 5683))
  File "/usr/local/lib/python3.12/asyncio/selector_events.py", line 1275, in sendto
    self._fatal_error(
  File "/usr/local/lib/python3.12/asyncio/selector_events.py", line 878, in _fatal_error
    self._loop.call_exception_handler({
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'call_exception_handler'
