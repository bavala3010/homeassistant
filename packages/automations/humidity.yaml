############################ Table of Contents ############################ 
# 
#   Automations
#     Vocht in huis >75%
#     Vocht master bedroom -> machine aan
#
############################ Automations ################################## 

# dauwpunt
# Hoger dan 26 Â°C	Ernstig hoog, zelfs dodelijk voor mensen met astma gerelateerde ziekten	65% en hoger
# 24â€“26 Â°C	Zeer ongemakkelijk, tamelijk benauwend	62%
# 21â€“24 Â°C	Erg vochtig, heel ongemakkelijk	52â€“60%
# 18â€“21 Â°C	Enigszins ongemakkelijk, voor de meeste mensen is de luchtvochtigheid aan de hoge kant	44â€“52%
# 16â€“18 Â°C	OK voor de meeste mensen, maar men merkt al dat de luchtvochtigheid aan de hoge kant is	37â€“46%
# 13â€“16 Â°C	Comfortabel	38â€“41%
# 10â€“12 Â°C	Zeer comfortabel	31â€“37%
# Lager dan 10 Â°C	Een beetje droog voor sommige mensen

automation:

- alias: "ðŸ’§ Vocht in huis >70%"
  id: '466f577f-83c4-4954-b17e-335ad7fa83f6'
  description: ''
  trigger:
    - platform: numeric_state
      entity_id: sensor.avg_inside_humidity
      above: '70'
      for: '00:15'
  condition:
    - condition: state
      entity_id: person.bart
      state: home
    - condition: time
      after: '07:00:00'
      before: '23:00:00'
  action:
    - service: notify.bart_phone
      data:
        title: Vocht
        message: "Vocht % in huis is heel hoog: {{states('sensor.avg_inside_humidity')}}%."
        data:
          color: "#0E86D4"
        actions:
        - action: URI
          title: meer info
          uri: /lucht-vocht-temperatuur/vocht-gram
        
  mode: single
  
- alias: "ðŸ’§ check vocht % master bedroom om 20u30"
  id: '9309eba6-275f-4a93-953a-908b937358ec'
  description: ''
  trigger:
  - platform: time
    at: '20:30'
  condition:
  - condition: numeric_state
    entity_id: sensor.master_bedroom_humidity
    above: '75'
  - condition: numeric_state
    entity_id: sensor.humidity_leuven24_wunderground
    above: '75'
  action:
  - service: notify.bart_phone
    data:
      title: Veel vocht in master bedroom. Raam is {{states('sensor.master_bedroom_raam')}}.
      message: "Vocht is {{states('sensor.master_bedroom_humidity')}}% en {{states('sensor.master_bedroom_thermal_absolutehumidity')}} gram
            water /mÂ³.<br>Zet eventueel machine aan."
      data:
        notification_icon: "mdi:water-percent-alert"      
        color: "#0E86D4"
        tag: window_master_bedroom
        channel: Vocht
        actions:
        - action: URI
          title: Meer info
          uri: /lucht-vocht-temperatuur/vocht-gram
  mode: single

- alias: "ðŸ’§ vocht gram in badkamer >14 gram/mÂ³"
  id: 8358a61f-74f1-4045-ba75-563bbca3b4e3
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: sensor.badkamer_thermal_absolutehumidity
    above: '14'
  condition: []
  action:
  - repeat:
      while:
      - condition: numeric_state
        entity_id: sensor.badkamer_thermal_absolutehumidity
        above: '14'
      sequence:
      - service: notify.bart_phone
        data:
          title: "Veel vocht in badkamer! Raam is {{states('sensor.badkamer_raam')}}."
          message: "{{states('sensor.badkamer_thermal_absolutehumidity')}} gram
            water /mÂ³ en {{states('sensor.badkamer_humidity')}}% vocht."
          data:
            notification_icon: "mdi:water-percent-alert"          
            color: "#0E86D4"
            tag: window_badkamer
            channel: vocht
            actions:
            - action: URI
              title: meer info
              uri: /lucht-vocht-temperatuur/vocht-gram
      - service: notify.madouce_phone
        data:
          title: "Veel vocht in badkamer! Raam is {{states('sensor.badkamer_raam')}}."
          message: "{{states('sensor.badkamer_thermal_absolutehumidity')}} gram
            water /mÂ³ en {{states('sensor.badkamer_humidity')}}% vocht."
          data:
            notification_icon: "mdi:water-percent-alert"          
            color: "#0E86D4"
            tag: window_badkamer
            channel: vocht
            actions:
            - action: URI
              title: meer info
              uri: /lucht-vocht-temperatuur/vocht-gram
      - delay:
          hours: 1
  - service: notify.bart_phone
    data:
      message: "clear_notification"
      data:
        tag: badkamer_vocht
  - service: notify.madouce_phone
    data:
      message: "clear_notification"
      data:
        tag: badkamer_vocht
  mode: single
  
- alias: "ðŸ’§ vocht % in master bedroom >80%"
  id: 'e1a0cee2-ee78-4e66-a133-9ea28f3a4fb8'
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: sensor.master_bedroom_humidity
    above: '80'
  condition: []
  action:
  - repeat:
      while:
      - condition: numeric_state
        entity_id: sensor.master_bedroom_humidity
        above: '80'
      sequence:
      - service: notify.bart_phone
        data:
          title: "Veel vocht in master bedroom! Raam is {{states('sensor.master_bedroom_raam')}}"
          message: "{{states('sensor.master_bedroom_thermal_absolutehumidity')}} gram
            water /mÂ³ en {{states('sensor.master_bedroom_humidity')}}% vocht."
          data:
            notification_icon: "mdi:water-percent-alert"          
            color: "#0E86D4"
            tag: window_master_bedroom
            channel: vocht
            actions:
            - action: URI
              title: meer info
              uri: /lucht-vocht-temperatuur/vocht-gram
      - service: notify.madouce_phone
        data:
          title: "Veel vocht in master bedroom! Raam is {{states('sensor.master_bedroom_raam')}}"
          message: "{{states('sensor.master_bedroom_thermal_absolutehumidity')}} gram
            water /mÂ³ en {{states('sensor.master_bedroom_humidity')}}% vocht."
          data:
            notification_icon: "mdi:water-percent-alert"          
            color: "#0E86D4"
            tag: window_master_bedroom
            channel: vocht
            actions:
            - action: URI
              title: meer info
              uri: /lucht-vocht-temperatuur/vocht-gram
      - delay:
          hours: 1
  - service: notify.bart_phone
    data:
      message: "clear_notification"
      data:
        tag: master_bedroom_vocht
  - service: notify.madouce_phone
    data:
      message: "clear_notification"
      data:
        tag: master_bedroom_vocht
  mode: single
