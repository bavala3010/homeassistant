############################ Table of Contents ############################ 
# 
########################################################################### 

automation:
- alias: te warm in kamer Amilya - open raam (Bart)
  id: 'ae5bbb04-af4b-42e2-ba7a-5d57a411c6bc'
  description: ''
  trigger:
  - platform: time_pattern
    minutes: /60
  condition:
  - condition: state
    entity_id: binary_sensor.kamer_amilya_raam_sensor
    state: 'off'
  - condition: template
    value_template: "{{ states('sensor.kamer_amilya_temperature') | float > 23 }}"
  - condition: template
    value_template: "{{ states('sensor.kamer_amilya_temperature') > states('sensor.temp_leuven24_wunderground') }}"
  - condition: zone
    entity_id: person.bart
    zone: zone.home
  - condition: time
    after: '7:0:0'
    before: '23:00:00'
  action:
  - service: notify.bart_phone
    data:
      message: "Temperatuur in kamer Amilya is {{states('sensor.kamer_amilya_temperature')}}°C. Buiten {{states('sensor.temp_leuven24_wunderground')}}°C."
      title: Open het raam van Amilya!
      data:
        color: blue
        channel: Temperatuur
        timeout: 3600
        tag: temp_amilya
        actions:
        - action: URI
          title: meer info
          uri: /lovelace/temp_detail
  mode: single
  
- alias: te warm in kamer Amilya - open raam (Madouce)
  id: '5f334c36-306e-4ab5-84c3-ba771b739748'
  description: ''
  trigger:
  - platform: time_pattern
    minutes: /60
  condition:
  - condition: state
    entity_id: binary_sensor.kamer_amilya_raam_sensor
    state: 'off'
  - condition: template
    value_template: "{{ states('sensor.kamer_amilya_temperature') | float > 23 }}"
  - condition: template
    value_template: "{{ states('sensor.kamer_amilya_temperature') > states('sensor.temp_leuven24_wunderground') }}"
  - condition: zone
    entity_id: person.madouce
    zone: zone.home
  - condition: time
    after: '7:0:0'
    before: '23:00:00'
  action:
  - service: notify.madouce_phone
    data:
      message: "Temperatuur in kamer Amilya is {{states('sensor.kamer_amilya_temperature')}}°C. Buiten {{states('sensor.temp_leuven24_wunderground')}}°C."
      title: Open het raam van Amilya!
      data:
        color: blue
        channel: Temperatuur
        timeout: 3600
        tag: temp_amilya
        actions:
        - action: URI
          title: meer info
          uri: /lovelace/temp_detail
  mode: single

- alias: 'fan: slaapkamer >21° = ventilator aan'
  id: '88271d4a-b388-4cae-8886-ed4c85529d9e'
  description: ''
  trigger:
  - platform: template
    value_template: '{{ states(''sensor.master_bedroom_temperature'') | float > 21
      }}'
  condition:
  - condition: time
    after: '22:30:00'
    before: '8:00:00'
  - condition: state
    entity_id: person.bart
    state: home
  action:
  - service: fan.turn_on
    target:
      entity_id: fan.xiaomi_smart_fan_3c
    data:
      percentage: 15
  mode: single

- alias: 'fan: slaapkamer <21° = ventilator uit'
  id: '1783207d-8943-4734-b76a-9a8a613e5b5d'
  description: ''
  trigger:
  - platform: template
    value_template: '{{ states(''sensor.master_bedroom_temperature'') | float < 21
      }}'
  condition: []
  action:
  - service: fan.turn_off
    target:
      entity_id: fan.xiaomi_smart_fan_3c
  mode: single