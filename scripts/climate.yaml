set_climate_levels:
  alias: bepaal niveau vocht en temperatuur probleem en oplossing
  sequence:
  - service: input_number.set_value
    target:
      entity_id: input_number.humidity_relative_problem_level
    data:
      value: >-        
          {% set hp = states('sensor.living_humidity') | float(default=0) %} 
          {% if   hp < 30 %} -2
          {% elif 30 < hp < 40 %} -1
          {% elif 40 < hp < 60 %} 0
          {% elif 60 < hp < 70 %} 1
          {% elif 70 < hp %} 2
          {% endif %}
  - service: input_number.set_value
    target:
      entity_id: input_number.humidity_absolute_problem_level
    data:
      value: >-        
          {% set hs = states('sensor.gram_water_living_diff_outside') | float(default=0) %} 
          {% if   hs < -1 %} -2
          {% elif -1 < hs < 0 %} -1
          {% elif 0 < hs < 0.5 %} 0
          {% elif 0.5 < hs < 1.5 %} 1
          {% elif 1.5 < hs %} 2
          {% endif %}
  - service: input_number.set_value
    target:
      entity_id: input_number.humidity_solution_level
    data:
      value: >-        
          {% set hs = states('sensor.gram_water_living_diff_outside') | float(default=0) %} 
          {% if   hs < -1 %} 2
          {% elif -1 < hs < 0 %} 1
          {% elif 0 < hs < 0.5 %} 0
          {% elif 0.5 < hs < 1.5 %} -1
          {% elif 1.5 < hs %} -2
          {% endif %}
  - service: input_number.set_value
    target:
      entity_id: input_number.temperature_problem_level
    data:
      value: >-        
          {% set tp = states('sensor.living_temperature') | float(default=0) %} 
          {% if   tp < 14 %} -2
          {% elif 14 < tp < 18 %} -1
          {% elif 18 < tp < 21 %} 0
          {% elif 21 < tp < 23 %} 1
          {% elif 23 < tp %} 2
          {% endif %}          
  - service: input_number.set_value
    target:
      entity_id: input_number.temperature_solution_level
    data:
      value: >-        
          {% set ts = states('sensor.living_temperature') | float(default=0) %} 
          {% if   ts < -4 %} +2
          {% elif -4 < ts < -2 %} +1
          {% elif -2 < ts < 2 %} 0
          {% elif 2 < ts < 4 %} -1
          {% elif 4 < ts %} -2
          {% endif %}