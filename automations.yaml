- alias: recycle_done
  id: 761e33f9-8fad-4537-8bf3-361aba8f5638
  trigger:
  - platform: event
    event_type: mobile_app_notification_action
    event_data:
      action: recycle_done
  action:
  - service: notify.bart_phone
    data:
      message: clear_notification
      data:
        tag: recycle
  - service: notify.madouce_phone
    data:
      message: clear_notification
      data:
        tag: recycle
- id: '1655128635738'
  alias: 'Waarschoot: alarm wordt uitgeschakeld (knop beneden) tijdens vakantiemodus'
  description: ''
  trigger:
  - platform: state
    entity_id:
    - switch.waarschoot_living_alarmknop
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.waarschoot_holiday_modus
    state: 'on'
  action:
  - delay:
      hours: 1
      minutes: 0
      seconds: 0
      milliseconds: 0
  - service: switch.turn_on
    data: {}
    target:
      entity_id: switch.waarschoot_living_alarmknop
  mode: single
- alias: Send a camera snapshot when motion is detected
  id: '1657712996549'
  description: ''
  use_blueprint:
    path: vorion/send-camera-snapshot-notification-on-motion.yaml
    input:
      motion_sensor: binary_sensor.buitensensor_deur_motion
      camera: camera.netatmo_eikenbos_oprit
      notify_device: b5d28be91fff8c03aece377f73b28dd2
      notification_title: Beweging aan voordeur
      delay: 0:0
- id: '1660174493940'
  alias: Nieuwe automatisering
  description: ''
  trigger:
  - platform: state
    entity_id:
    - switch.iphonevandylan_iphone
    to: 'on'
  condition: []
  action:
  - service: notify.bart_phone
    data:
      message: Dylan gesignaleerd
      title: Dylan gesignaleerd
  mode: single
- id: '1660174608523'
  alias: Dylan gesignaleerd
  description: ''
  trigger:
  - platform: state
    entity_id:
    - device_tracker.iphonevandylan_iphone
    to: 'on'
  condition: []
  action:
  - service: notify.bart_phone
    data:
      message: Dylan gesignaleerd
      title: Dylan gesignaleerd
  mode: single
- id: '1662192197709'
  alias: Bij aankomst winkel boodschappenlijstje tonen in Google Keep
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.madouce_phone_connected_to_car
    to: 'off'
    for:
      hours: 0
      minutes: 0
      seconds: 5
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: person.madouce
      state: Aldi Bierbeek
    - condition: state
      entity_id: person.madouce
      state: Action Bierbeek
    - condition: state
      entity_id: person.madouce
      state: AH Zaventem
    - condition: state
      entity_id: person.madouce
      state: Lidl Sterrebeek
  action:
  - service: notify.madouce_phone
    data:
      message: TTS
      data:
        tts_text: Dag Madouce. Het boodschappenlijstje is geopend.
        ttl: 0
        priority: high
        media_stream: alarm_stream_max
  - service: notify.madouce_phone
    data:
      message: command_activity
      data:
        intent_package_name: com.google.android.keep
        intent_action: android.intent.action.VIEW
        intent_uri: https://keep.google.com/u/0/#LIST/1tp-ZTk_c08ZlPeLqLHEUm10bx6DtTQbI9_IOigZVGtBjakrxKwJo4DiytWorvbiXyHGD
  mode: single
- id: '1662195373247'
  alias: Waze naar huis openen
  description: ''
  trigger:
  - platform: time
    at: '10:00:00'
  condition: []
  action:
  - service: notify.bart_phone
    data:
      message: command_activity
      title: https://waze.com/ul?favorite=home&navigate=yes
      data:
        channel: com.waze
        tag: android.intent.action.VIEW
  mode: single
- id: '1662286902683'
  alias: charging state "error"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.audi_e_tron_sportback_charging_state
    to: error
  condition: []
  action:
  - service: notify.bart_phone
    data:
      title: Fout bij laden auto
      message: Status van auto is in "error"
  mode: single
- id: '1663095466898'
  alias: Bart en/of Madouce niet thuis = airco master bedroom uit
  description: ''
  trigger:
  - platform: state
    entity_id:
    - group.bart_madouce
    to: not_home
  condition: []
  action:
  - service: climate.set_hvac_mode
    data:
      hvac_mode: 'off'
    target:
      device_id: 64296bd295e4506b8a3ec42c8aae7e58
  mode: single
- id: '1664611616733'
  alias: Forceer update huisverbruik-meter bij aanpassing zonneproductie-meter
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.solar_power
  - platform: numeric_state
    entity_id: sensor.huisverbruik
    below: 100
  condition: []
  action:
  - service: homeassistant.update_entity
    target:
      entity_id:
      - sensor.shellyem3_bcff4dfd1dbb_channel_a_power
      - sensor.shellyem3_bcff4dfd1dbb_channel_b_power
      - sensor.shellyem3_bcff4dfd1dbb_channel_c_power
      - sensor.huisverbruik
    data: {}
  mode: restart
- id: '1665867606604'
  alias: 'Test: beweging oprit/pad = spot aan'
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.voordeur_bewegingssensor_motion
    to: 'on'
  condition:
  - condition: state
    entity_id: sun.sun
    state: below_horizon
  action:
  - service: light.turn_on
    data: {}
    target:
      entity_id:
      - light.netatmo_eikenbos_oprit
  mode: single
- id: '1665942731812'
  alias: 'log  in Google Sheets: km auto '
  description: ''
  trigger:
  - platform: time
    at: '23:58:00'
  condition: []
  action:
  - service: google_sheets.append_sheet
    data:
      config_entry: 2d4ff1f67e0a1e75255bae8b80df0d52
      worksheet: AudiEtron
      data:
        odometer: '{{ states(''sensor.audi_e_tron_sportback_mileage'') | float }}'
        date: '{{ now() }}'
        planning: '{% set t = (now().date() + timedelta(days=0)) %} {% set car_use_day
          = ''input_select.car_use_day_'' ~ t.isoweekday() %}  {{ states(car_use_day)
          }}'
  mode: single
- id: '1666249229359'
  alias: 'log  in Google Sheets: dagelijkse energiewaarden '
  description: ''
  trigger:
  - platform: time
    at: '23:59:30'
  condition: []
  action:
  - service: google_sheets.append_sheet
    data:
      config_entry: 2d4ff1f67e0a1e75255bae8b80df0d52
      worksheet: Energy
      data:
        solar_production: '{{ states(''sensor.sma_today'') | float() }}'
        net_injection_daily: '{{ states(''sensor.net_injection_daily'') | float()
          }}'
        net_consumption_daily: '{{ states(''sensor.net_consumption_daily'') | float()
          }}'
        solar_terraszijde_efficiency: '{{ (states(''sensor.solar_terraszijde_energie_daily'')
          | float / 6150 * 1000 * 100) | round(1) }}%'
        solar_voorzijde_efficiency: '{{ (states(''sensor.solar_voorzijde_energie_daily'')
          | float / 8610 * 1000 * 100 ) | round(1) }}%'
        car_battery_charged_daily: '{{ states(''sensor.car_charger_energy_daily'')
          | float() }}'
        car_charge_solar_energy_daily: '{{ states(''sensor.car_charge_solar_energy_daily'')
          | float() }}'
        car_charge_net_energy_daily: '{{ states(''sensor.car_charge_net_energy_daily'')
          | float() }}'
        net_neutrality_home: '{{ states(''sensor.net_neutrality_home'') | float()
          }}'
        net_neutrality_car: '{{ states(''sensor.net_neutrality_car'') | float() }}'
        net_neutrality: '{{ states(''sensor.net_neutrality'') | float() }}'
        washing_machine_energy_daily: '{{ states(''sensor.washing_machine_energy_daily'')
          | float() }}'
        dryer_energy_daily: '{{ states(''sensor.dryer_energy_daily'') | float() }}'
        dehumidifier_energy_daily: '{{ states(''sensor.dehumidifier_energy_daily'')
          | float() }}'
        infrared_panel_energy_daily: '{{ states(''sensor.infrared_panel_energy_daily'')
          | float() }}'
        living_airco_daily_heat_energy_consumption: '{{ states(''sensor.living_airco_daily_heat_energy_consumption'')
          | float() }}'
        amilya_airco_daily_heat_energy_consumption: '{{ states(''sensor.amilya_airco_daily_heat_energy_consumption'')
          | float() }}'
        alunya_airco_daily_heat_energy_consumption: '{{ states(''sensor.alunya_airco_daily_heat_energy_consumption'')
          | float() }}'
        master_bedroom_airco_daily_heat_energy_consumption: '{{ states(''sensor.master_bedroom_airco_daily_heat_energy_consumption'')
          | float() }}'
        living_airco_daily_cool_energy_consumption: '{{ states(''sensor.living_airco_daily_cool_energy_consumption'')
          | float() }}'
        amilya_airco_daily_cool_energy_consumption: '{{ states(''sensor.amilya_airco_daily_cool_energy_consumption'')
          | float() }}'
        alunya_airco_daily_cool_energy_consumption: '{{ states(''sensor.alunya_airco_daily_cool_energy_consumption'')
          | float() }}'
        master_bedroom_airco_daily_cool_energy_consumption: '{{ states(''sensor.master_bedroom_airco_daily_cool_energy_consumption'')
          | float() }}'
  mode: single
- id: '1666291531081'
  alias: 'Alunya airco heating: ''s nachts niet meer dan 18 graden'
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: input_number.alunya_airco_target_temperature
    above: 18
  condition:
  - condition: time
    after: '23:00:00'
    before: 05:30:00
  - condition: template
    value_template: '{{trigger.to_state.context.user_id == ''7e508a5d2a5c42029f3d9238f0cc4648''
      }}

      '
  action:
  - service: notify.alunya_phone
    data:
      title: De temperatuur wordt 's nachts beperkt.
      message: '{{ states(''input_number.alunya_airco_target_temperature'') }} graden
        is niet mogelijk.'
  - service: notify.bart_phone
    data:
      title: De temperatuur wordt 's nachts beperkt.
      message: Alunya probeerde temperatuur op {{ states('input_number.alunya_airco_target_temperature')
        }} graden in te stellen.
  - service: input_number.set_value
    data:
      value: 14
    target:
      entity_id: input_number.alunya_airco_target_temperature
  mode: single
- id: '1666293716042'
  alias: 'Amilya airco heating: ''s nachts niet meer dan 18 graden'
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: input_number.amilya_airco_target_temperature
    above: 18
  condition:
  - condition: time
    after: '23:00:00'
    before: 05:30:00
  - condition: template
    value_template: '{{trigger.to_state.context.user_id == ''7678e64f5e984bc2aac5d1d92cc318eb''
      }}

      '
  action:
  - service: notify.amilya_phone
    data:
      title: De temperatuur wordt 's nachts beperkt.
      message: '{{ states(''input_number.amilya_airco_target_temperature'') }} graden
        is niet mogelijk.'
  - service: notify.bart_phone
    data:
      title: De temperatuur wordt 's nachts beperkt.
      message: Amilya probeerde temperatuur op {{ states('input_number.amilya_airco_target_temperature')
        }} graden in te stellen.
  - service: input_number.set_value
    data:
      value: 14
    target:
      entity_id: input_number.amilya_airco_target_temperature
  mode: single
- id: '1666509207517'
  alias: 'log  in Google Sheets: licht douche aan'
  description: ''
  trigger:
  - platform: state
    entity_id:
    - light.badkamer_douche
    to: 'on'
  condition: []
  action:
  - service: google_sheets.append_sheet
    data:
      config_entry: 2d4ff1f67e0a1e75255bae8b80df0d52
      worksheet: Douche
      data:
        light.badkamer_douche_on: '{{ now() }}'
  mode: single
- id: '1666898548765'
  alias: 'airco Amilya: huidige temperatuur is hoger dan gevraagde temperatuur'
  description: ''
  trigger:
  - platform: state
    entity_id: input_number.amilya_airco_target_temperature
  condition:
  - condition: template
    value_template: '{{ states(''sensor.kamer_amilya_temperature'') | float > states(''input_number.amilya_airco_target_temperature'')
      | float }}'
  action:
  - service: notify.amilya_phone
    data:
      title: Gevraagde temperatuur al bereikt.
      message: Kamertemperatuur is momenteel {{ states('sensor.kamer_amilya_temperature')
        | float }} graden.
  - service: climate.turn_off
    data: {}
    target:
      device_id: 61864d1ab32c5af91d5f13faf697c27e
  - service: climate.set_temperature
    data:
      temperature: 14
    target:
      device_id: 61864d1ab32c5af91d5f13faf697c27e
  - service: input_number.set_value
    data:
      value: 14
    target:
      entity_id: input_number.amilya_airco_target_temperature
  - service: timer.finish
    data: {}
    target:
      entity_id: timer.amilya_airco_timer
  mode: single
- id: '1667374982221'
  alias: 'Waarschoot: verlaten huis = chauffage uit & alarm aan'
  description: ''
  trigger:
  - platform: state
    entity_id:
    - person.anita
    from: Waarschoot
    for:
      hours: 0
      minutes: 1
      seconds: 0
  condition: []
  action:
  - service: climate.set_preset_mode
    data:
      preset_mode: away
    target:
      entity_id:
      - climate.waarschoot_keuken
      - climate.waarschoot_living
      - climate.waarschoot_zitput
      - climate.waarschoot_overloop
      - climate.waarschoot_badkamer
      - climate.waarschoot_slaapkamer
  - service: climate.set_hvac_mode
    data:
      hvac_mode: 'off'
    target:
      entity_id:
      - climate.waarschoot_keuken
      - climate.waarschoot_living
      - climate.waarschoot_zitput
      - climate.waarschoot_overloop
      - climate.waarschoot_badkamer
      - climate.waarschoot_slaapkamer
  - service: switch.turn_on
    data: {}
    target:
      entity_id:
      - switch.waarschoot_living_alarmknop
      - switch.waarschoot_living_camera
  - service: notify.anita_phone
    data:
      title: Verwarming uit en alarm aan
      message: 'De verwarming wordt uitgeschakeld door het verlaten van het huis.
        Het is nu nog {{ states(''sensor.waarschoot_living_temperature'') }} graden
        in de living.

        '
  - service: notify.bart_phone
    data:
      title: Waarschoot:Verwarming uit en alarm aan
      message: 'De verwarming wordt uitgeschakeld door het verlaten van het huis.
        Het is nu nog {{ states(''sensor.waarschoot_living_temperature'') }} graden
        in de living.

        '
  - service: notify.anita_phone
    data:
      message: TTS
      data:
        tts_text: Dag Anita. De verwarming wordt uitgeschakeld en het alarm wordt
          ingeschakeld.
        ttl: 0
        priority: high
        media_stream: alarm_stream_max
  mode: single
- id: '1667375930055'
  alias: 'Waarschoot: aankomst thuis = verwarming op automatisch en alarm uit'
  description: ''
  trigger:
  - platform: state
    entity_id:
    - person.anita
    for:
      hours: 0
      minutes: 0
      seconds: 20
    to: Waarschoot
  condition: []
  action:
  - service: climate.set_preset_mode
    data:
      preset_mode: home
    target:
      entity_id:
      - climate.waarschoot_keuken
      - climate.waarschoot_living
      - climate.waarschoot_zitput
      - climate.waarschoot_overloop
      - climate.waarschoot_badkamer
      - climate.waarschoot_slaapkamer
  - service: climate.set_hvac_mode
    data:
      hvac_mode: auto
    target:
      entity_id:
      - climate.waarschoot_keuken
      - climate.waarschoot_living
      - climate.waarschoot_zitput
      - climate.waarschoot_overloop
      - climate.waarschoot_badkamer
      - climate.waarschoot_slaapkamer
  - service: switch.turn_off
    data: {}
    target:
      entity_id:
      - switch.waarschoot_living_alarmknop
      - switch.waarschoot_living_camera
  - service: notify.anita_phone
    data:
      title: Verwarming aan (volgens schema)
      message: 'De verwarming wordt ingeschakeld bij aankomst thuis. Het is nu nog
        {{ states(''sensor.waarschoot_living_temperature'') }} graden in de living
        en {{ states(''sensor.waarschoot_keuken_temperature'') }} graden in de keuken

        '
  - service: notify.bart_phone
    data:
      title: Waarschoot:Verwarming aan (volgens schema)
      message: 'De verwarming wordt ingeschakeld bij aankomst thuis. Het is nu nog
        {{ states(''sensor.waarschoot_living_temperature'') }} graden in de living
        en {{ states(''sensor.waarschoot_keuken_temperature'') }} graden in de keuken

        '
  - service: notify.anita_phone
    data:
      message: TTS
      data:
        tts_text: Dag Anita. Welkom thuis. De verwarming wordt ingeschakeld.
        ttl: 0
        priority: high
        media_stream: alarm_stream_max
  mode: single
- id: '1667380913240'
  alias: Log Waarschoot alarm uitzetten met knop boven
  description: ''
  trigger:
  - platform: state
    entity_id:
    - switch.waarschoot_boven_alarmknop
    to: 'off'
  condition: []
  action:
  - service: google_sheets.append_sheet
    data:
      config_entry: 2d4ff1f67e0a1e75255bae8b80df0d52
      worksheet: Waarschoot
      data:
        switch.waarschoot_boven_alarmknop_uit: '{{ now() }}'
  mode: single
