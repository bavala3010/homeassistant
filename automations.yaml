- alias: RecycleApp notificaties
  id: 50cbd530-9e44-4283-95f9-24f8ca182701
  trigger:
  - platform: time
    at: '20:30:00'
  condition:
  - condition: not
    conditions:
    - condition: state
      entity_id: sensor.recycleapp_morgen
      state: Geen
  action:
  - service: notify.bart_phone
    data:
      title: '{{title}}'
      message: '{{message}}'
      data:
        tag: recycle
        actions:
        - action: recycle_done
          title: Ik heb het buiten gezet!
  - service: notify.madouce_phone
    data:
      title: '{{title}}'
      message: '{{message}}'
      data:
        tag: recycle
        actions:
        - action: recycle_done
          title: Ik heb het buiten gezet!
  variables:
    title: '{% if state_attr(''sensor.recycleapp_gft'', ''Days_until'') == 1 %}Morgen
      groene bak {%elif state_attr(''sensor.recycleapp_restafval'', ''Days_until'')
      == 1 %}Morgen ophaling bruine zak. {%elif state_attr(''sensor.recycleapp_pmd'',
      ''Days_until'') == 1 %}Morgen ophaling blauwe zak. {%elif state_attr(''sensor.recycleapp_papier'',
      ''Days_until'') == 1 %}Morgen ophaling oud papier. {%endif%}'
    message: '{% if state_attr(''sensor.recycleapp_gft'', ''Days_until'') == 1 %}
      Zet de groene bak aan straat. {%elif state_attr(''sensor.recycleapp_restafval'',
      ''Days_until'') == 1 %}Zet de bruine zak aan straat. {%elif state_attr(''sensor.recycleapp_pmd'',
      ''Days_until'') == 1 %}Zet de blauwe zak aan straat. {%elif state_attr(''sensor.recycleapp_papier'',
      ''Days_until'') == 1 %}Zet het oud papier aan straat. {%endif%}'
  mode: single
- alias: recycle_done
  id: 761e33f9-8fad-4537-8bf3-361aba8f5638
  trigger:
  - platform: event
    event_type: mobile_app_notification_action
    event_data:
      action: recycle_done
  action:
  - service: notify.bart_phone
    data:
      message: clear_notification
      data:
        tag: recycle
  - service: notify.madouce_phone
    data:
      message: clear_notification
      data:
        tag: recycle
- alias: Elek timer wasmachine zetten (2u00)
  id: '1645356388702'
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.elec_wasmachine_busy
    to: 'on'
  condition: []
  action:
  - service: input_datetime.set_datetime
    data:
      datetime: '{{ ((as_timestamp(now())  + (120 * 60)) |timestamp_custom(''%Y-%m-%d
        %H:%M:%S'')) }}'
    target:
      entity_id: input_datetime.elec_wasmachine_end
  mode: single
- alias: Elek timer vaatwasser zetten (1u40)
  id: '1645359198579'
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.elec_vaatwasser_busy
    to: 'on'
  condition: []
  action:
  - service: input_datetime.set_datetime
    data:
      datetime: '{{ ((as_timestamp(now())  + (100 * 60)) |timestamp_custom(''%Y-%m-%d
        %H:%M:%S'')) }}'
    target:
      entity_id: input_datetime.elec_vaatwasser_end
  mode: single
- alias: Elek timer droger zetten (2u00)
  id: '1645359477977'
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.elec_droger_busy
    to: 'on'
  condition: []
  action:
  - service: input_datetime.set_datetime
    data:
      datetime: '{{ ((as_timestamp(now())  + (120 * 60)) |timestamp_custom(''%Y-%m-%d
        %H:%M:%S'')) }}'
    target:
      entity_id: input_datetime.elec_droger_end
  mode: single
- alias: 'Waarschoot: alarm wordt uitgeschakeld (knop beneden)'
  id: '1655128635738'
  description: ''
  trigger:
  - platform: state
    entity_id:
    - switch.waarschoot_living_alarmknop
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.waarschoot_holiday_modus
    state: 'on'
  action:
  - delay:
      hours: 1
      minutes: 0
      seconds: 0
      milliseconds: 0
  - service: switch.turn_on
    data: {}
    target:
      entity_id: switch.waarschoot_living_alarmknop
  mode: single
- alias: Send a camera snapshot when motion is detected
  id: '1657712996549'
  description: ''
  use_blueprint:
    path: vorion/send-camera-snapshot-notification-on-motion.yaml
    input:
      motion_sensor: binary_sensor.buitensensor_deur_motion
      camera: camera.netatmo_eikenbos_oprit
      notify_device: b5d28be91fff8c03aece377f73b28dd2
      notification_title: Beweging aan voordeur
      delay: 0:0
- id: '1660174493940'
  alias: Nieuwe automatisering
  description: ''
  trigger:
  - platform: state
    entity_id:
    - switch.iphonevandylan_iphone
    to: 'on'
  condition: []
  action:
  - service: notify.bart_phone
    data:
      message: Dylan gesignaleerd
      title: Dylan gesignaleerd
  mode: single
- id: '1660174608523'
  alias: Dylan gesignaleerd
  description: ''
  trigger:
  - platform: state
    entity_id:
    - device_tracker.iphonevandylan_iphone
    to: 'on'
  condition: []
  action:
  - service: notify.bart_phone
    data:
      message: Dylan gesignaleerd
      title: Dylan gesignaleerd
  mode: single
- id: '1662192197709'
  alias: Bij aankomst winkel boodschappenlijstje tonen in Google Keep
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.madouce_phone_connected_to_car
    to: 'off'
    for:
      hours: 0
      minutes: 0
      seconds: 5
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: person.madouce
      state: Aldi Bierbeek
    - condition: state
      entity_id: person.madouce
      state: Action Bierbeek
    - condition: state
      entity_id: person.madouce
      state: AH Zaventem
    - condition: state
      entity_id: person.madouce
      state: Lidl Sterrebeek
  action:
  - service: notify.madouce_phone
    data:
      message: TTS
      data:
        tts_text: Wil je het boodschappenlijstje zien?
        ttl: 0
        priority: high
        media_stream: alarm_stream_max
  - service: notify.madouce_phone
    data:
      title: Welkom in de winkel.
      message: Wil je het boodschappenlijstje zien?
      data:
        actions:
        - action: URI
          title: zo ja, klik hier
          uri: https://keep.google.com/u/0/#LIST/1abVJeIHcbEuGmkbxfSRp4u-w3spv7Ck1dS5Y0o03VfIhM7bFjrr1xcfK_gvFizCvCRCMtrUQ
  mode: single
- id: '1662195373247'
  alias: Waze naar huis openen
  description: ''
  trigger:
  - platform: time
    at: '10:00:00'
  condition: []
  action:
  - service: notify.bart_phone
    data:
      message: command_activity
      title: https://waze.com/ul?favorite=home&navigate=yes
      data:
        channel: com.waze
        tag: android.intent.action.VIEW
  mode: single
- id: '1662286902683'
  alias: charging state "error"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.audi_e_tron_sportback_charging_state
    to: error
  condition: []
  action:
  - service: notify.bart_phone
    data:
      title: Fout bij laden auto
      message: Status van auto is in "error"
  mode: single
- id: '1663095466898'
  alias: Bart en/of Madouce niet thuis = airco master bedroom uit
  description: ''
  trigger:
  - platform: state
    entity_id:
    - group.bart_madouce
    to: not_home
  condition: []
  action:
  - service: climate.set_hvac_mode
    data:
      hvac_mode: 'off'
    target:
      device_id: 64296bd295e4506b8a3ec42c8aae7e58
  mode: single
- id: '1663704158456'
  alias: wasmachine start/stopt
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: sensor.washingmachine_power
    for:
      hours: 0
      minutes: 3
      seconds: 0
    above: 3
    id: washing machine started
  condition: []
  action:
  - if:
    - condition: trigger
      id: washing-started
      alias: Washing Started
    then:
    - service: input_datetime.set_datetime
      data:
        datetime: '{{ now() }}'
      target:
        entity_id: input_datetime.washing_started
    - service: input_datetime.set_datetime
      data:
        datetime: '{{ (now().timestamp() + states(''input_number.washing_expected_runtime'')
          | float(0)) | timestamp_local() }}'
      target:
        entity_id: input_datetime.washing_expected_time_to_stop
    else:
    - service: notify.mobile_app_iphone
      data:
        message: The Washing machine is ready!
        title: Washing Notification
    - service: input_datetime.set_datetime
      data:
        datetime: '{{ now() }}'
      target:
        entity_id: input_datetime.washing_stopped
    - service: input_number.set_value
      data:
        value: '{{ (as_timestamp(states(''input_datetime.washing_stopped'')) - as_timestamp(states(''input_datetime.washing_started'')))
          | float(0) }}'
      target:
        entity_id: input_number.washing_expected_runtime
  mode: single
- id: '1664611616733'
  alias: Forceer update huisverbruik-meter bij aanpassing zonneproductie-meter
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.solar_power
  - platform: numeric_state
    entity_id: sensor.huisverbruik
    below: 100
  condition: []
  action:
  - service: homeassistant.update_entity
    target:
      entity_id:
      - sensor.shellyem3_bcff4dfd1dbb_channel_a_power
      - sensor.shellyem3_bcff4dfd1dbb_channel_b_power
      - sensor.shellyem3_bcff4dfd1dbb_channel_c_power
      - sensor.huisverbruik
    data: {}
  mode: restart
